{"_path":"/page4","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Mobile App Development with Flutter (Part 3)","description":"Final part of the Dart and Flutter series. In this final part we are going to build our app.","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"From the start of this series, we checked out the basics of Dart and Flutter; and made a plan about how we are intending to develop our Twitter clone app. Now it's time to get action and start programming."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First of all, I should say that this one month adventure was fun. I didn't learn any brand-new technical skills, but I did a lot of practice in mobile app development. Coming from web development, I can say that mobile development is easier than web development, thanks to lots of prebuilt content and services. But at the end of the day, they are all tools to build stuff and it was fun."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I learned some things about Firebase on the road and I changed parts of our plan accordingly. The things about Firebase are, firstly, the Firebase functions are paid, and secondly, the Firestore extensions are paid. Due to the Turkish Lira - US Dolar currency exchange rate, I don't want to subscribe to a paid service. So I cancel these futures. Instead, for demonstration, I implemented an example trending topics collection to display on our explore page. Rather than full-text search, I decided to search only for users by their usernames when looking at the search results. Other than these, for paginated Firestore queries, I used a package. However, I will also discuss how it is possible to do it by hand."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Additionally, I should mention that this is not a learning meterial but I tried to explain the code as much as I could. Also at the end, you could check out the Github repository of the project for full source code."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With the light of all this, let's start..."}]},{"type":"element","tag":"h2","props":{"id":"last-step-play-the-game"},"children":[{"type":"text","value":"Last Step: Play the Game"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First of all, we need to install the Flutter extension to Visual Studio Code, if you didn't already install. Thanks to this extension we can create Flutter projects. All we need to do is open VS Code's command pallet and type 'New Project'; choose the Flutter project option. VS Code will ask you where to store the project name and where to save the project. After these steps, it will automatically create a blank project with an example counter application. You can have a look at this app..."}]},{"type":"element","tag":"h3","props":{"id":"directory-structure"},"children":[{"type":"text","value":"Directory Structure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After project creation we need to create our directory layout. This step is critical because in order to efficiently code we need to find and reach files easily. There will be 3 main folders that I'll create: "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Models"}]},{"type":"text","value":", "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"routes"}]},{"type":"text","value":" and "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"widgets"}]},{"type":"text","value":". In the models folder, we will store our database models and providers. The Routes folder will hold the screens that we build. Finally, in the widgets folder we will store reuseable widgets that we'll use while building this app."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With these folders, I create a routes file("},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"routes.dart"}]},{"type":"text","value":") that will hold our routing mechanics next to the main("},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"main.dart"}]},{"type":"text","value":") file."}]},{"type":"element","tag":"h3","props":{"id":"routing"},"children":[{"type":"text","value":"Routing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the routes file, we create a "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"text","value":" class. There are some static strings in this class that store the names of routes. Additionally, it has a "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"generateRoute"}]},{"type":"text","value":" function that takes a "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"RouteSettings"}]},{"type":"text","value":" and provides the real route to the Material app. For now we will return container widgets, but when we create our screens we add them to here for routing."}]},{"type":"element","tag":"code","props":{"code":"class RouteGenerator {\r\n  static const String home = '/';\r\n  static const String login = '/singin';\r\n  static const String register = '/signup';\r\n\r\n  RouteGenerator._();\r\n\r\n  static Route<dynamic> generateRoute(RouteSettings settings) {\r\n    switch (settings.name) {\r\n      case home:\r\n        return FirebaseAuth.instance.currentUser == null\r\n            ? MaterialPageRoute(\r\n                builder: (_) => const SigninScreen(),\r\n              )\r\n            : MaterialPageRoute(\r\n                builder: (_) => const TimelineScreen(),\r\n              );\r\n      case login:\r\n        return MaterialPageRoute(builder: (_) => const SigninScreen());\r\n      case register:\r\n        return MaterialPageRoute(builder: (_) => const SignupScreen());\r\n      default:\r\n        return MaterialPageRoute(\r\n            builder: (_) => ErrorWidget('Route not found'));\r\n    }\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class RouteGenerator {\r\n  static const String home = '/';\r\n  static const String login = '/singin';\r\n  static const String register = '/signup';\r\n\r\n  RouteGenerator._();\r\n\r\n  static Route<dynamic> generateRoute(RouteSettings settings) {\r\n    switch (settings.name) {\r\n      case home:\r\n        return FirebaseAuth.instance.currentUser == null\r\n            ? MaterialPageRoute(\r\n                builder: (_) => const SigninScreen(),\r\n              )\r\n            : MaterialPageRoute(\r\n                builder: (_) => const TimelineScreen(),\r\n              );\r\n      case login:\r\n        return MaterialPageRoute(builder: (_) => const SigninScreen());\r\n      case register:\r\n        return MaterialPageRoute(builder: (_) => const SignupScreen());\r\n      default:\r\n        return MaterialPageRoute(\r\n            builder: (_) => ErrorWidget('Route not found'));\r\n    }\r\n  }\r\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order for routing to work, we need to add it to our Material app that is in our main file. We import it, than using it's static methods we set the 'initialRoute' parameter of material app to "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"text","value":"'s home. After we set the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"onGenerateRoute"}]},{"type":"text","value":" parameter to the RouteGenerator's "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"generateRoute"}]},{"type":"text","value":" function. With this way we can navigate through our app thanks to static strings."}]},{"type":"element","tag":"code","props":{"code":"class MyApp extends StatelessWidget {\r\n  const MyApp({Key? key}) : super(key: key);\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Twitter Clone',\r\n      theme: ThemeData(\r\n        primarySwatch: Colors.blue,\r\n      ),\r\n      initialRoute: RouteGenerator.home,\r\n      onGenerateRoute: RouteGenerator.generateRoute,\r\n      debugShowCheckedModeBanner: false, // This removes debug banner\r\n    );\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class MyApp extends StatelessWidget {\r\n  const MyApp({Key? key}) : super(key: key);\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Twitter Clone',\r\n      theme: ThemeData(\r\n        primarySwatch: Colors.blue,\r\n      ),\r\n      initialRoute: RouteGenerator.home,\r\n      onGenerateRoute: RouteGenerator.generateRoute,\r\n      debugShowCheckedModeBanner: false, // This removes debug banner\r\n    );\r\n  }\r\n}\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"firebase"},"children":[{"type":"text","value":"Firebase"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One of the most crucial things that we have to do is set up our app as a Firebase app. For this we need to add some packages to our app: "},{"type":"element","tag":"a","props":{"href":"https://pub.dev/packages/firebase_core","rel":["nofollow"]},"children":[{"type":"text","value":"Firebase Core"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://pub.dev/packages/firebase_auth","rel":["nofollow"]},"children":[{"type":"text","value":"Firebase Auth"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://pub.dev/packages/cloud_firestore","rel":["nofollow"]},"children":[{"type":"text","value":"Cloud Firestore"}]},{"type":"text","value":". Also we need to activate the Firebase command line tool for Dart with this command: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dart pub global activate flutterfire_cli"}]},{"type":"text","value":" ("},{"type":"element","tag":"a","props":{"href":"https://firebase.flutter.dev/docs/overview/","rel":["nofollow"]},"children":[{"type":"text","value":"Check out for help"}]},{"type":"text","value":"). After this step, we can use "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"flutterfire(firebase dart CLI)"}]},{"type":"text","value":" to configure our app. All we have to do is input this command into our project folder: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"flutterfire configure"}]},{"type":"text","value":". It will ask you whether you want to choose an existing project or make a new one. You can create a brand-new project following the steps. Then, CLI will ask you about which platforms should be configured for the Firebase projects. After a short wait, everything will be set up."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to use Firebase in our app, we should initialize it last. In main.dart, import the Firebase Core package, and Firebase options file that Flutterfire generated. After add this code sniplet before the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"runApp"}]},{"type":"text","value":" statement:"}]},{"type":"element","tag":"code","props":{"code":"WidgetsFlutterBinding.ensureInitialized();\r\nawait Firebase.initializeApp(\r\n    options: DefaultFirebaseOptions.currentPlatform,\r\n);\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"WidgetsFlutterBinding.ensureInitialized();\r\nawait Firebase.initializeApp(\r\n    options: DefaultFirebaseOptions.currentPlatform,\r\n);\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With this done, we can import sub-service packages to our files and use Firebase services."}]},{"type":"element","tag":"h3","props":{"id":"riverpod-state-management"},"children":[{"type":"text","value":"Riverpod: State Management"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As we are developing through our app, we need to share information between screens. Riverpod was selected as our state management package for this purpose. In order for Riverpod to work we need to initialize it too. We do this by changing the runApp statement to this statement:"}]},{"type":"element","tag":"code","props":{"code":"runApp(\r\n  const ProviderScope(\r\n    child: MyApp(),\r\n  ),\r\n);\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"runApp(\r\n  const ProviderScope(\r\n    child: MyApp(),\r\n  ),\r\n);\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"authentication"},"children":[{"type":"text","value":"Authentication"}]},{"type":"element","tag":"h4","props":{"id":"sign-in-page"},"children":[{"type":"text","value":"Sign In Page"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here we are at the point that we really start the project. For sign in, we need to create a sign in page first. This page displays the scaffold with app bar. As its body we will create a stateful Sign in form widget. We created this page in the routes folder. Also we need to add it to the routes.dart file in order to navigate."}]},{"type":"element","tag":"code","props":{"code":"class SigninScreen extends StatelessWidget {\r\n  const SigninScreen({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: const Text('Sign in'),\r\n      ),\r\n      body: const SigninForm(),\r\n    );\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class SigninScreen extends StatelessWidget {\r\n  const SigninScreen({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: const Text('Sign in'),\r\n      ),\r\n      body: const SigninForm(),\r\n    );\r\n  }\r\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the sign in widget, we need to create a form. With the form widget, we can easily validate data. In the form there are 2 text fields for email address and password, a button for sign in and a button to redirect user to sign up. We need to define a controller for each text field in order to get the text entered there afterwards."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The implementation of the sign up button is easy. All we need to do is push the sign up page to the navigator. We will create it next."}]},{"type":"element","tag":"code","props":{"code":"Navigator.of(context).pushReplacementNamed(RouteGenerator.register);\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"Navigator.of(context).pushReplacementNamed(RouteGenerator.register);\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the sign in button, first we need to validate the inputs. Then, using Firebase Auth, we try to sign the user in. Afterwards, if no error occurs, we push the homepage route to the navigator."}]},{"type":"element","tag":"code","props":{"code":"ElevatedButton(\r\n    onPressed: () async {\r\n        if (_formKey.currentState?.validate() ?? false) {\r\n        try {\r\n            await FirebaseAuth.instance.signInWithEmailAndPassword(\r\n                email: _emailController.text,\r\n                password: _passwordController.text,\r\n            );\r\n            if (!mounted) return;\r\n            Navigator.of(context)\r\n                .pushReplacementNamed(RouteGenerator.home);\r\n        } on FirebaseAuthException catch (e) {\r\n            ScaffoldMessenger.of(context).showSnackBar(\r\n            SnackBar(\r\n                content: Text(e.message ?? 'Error'),\r\n            ),\r\n            );\r\n        }\r\n        }\r\n    },\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"ElevatedButton(\r\n    onPressed: () async {\r\n        if (_formKey.currentState?.validate() ?? false) {\r\n        try {\r\n            await FirebaseAuth.instance.signInWithEmailAndPassword(\r\n                email: _emailController.text,\r\n                password: _passwordController.text,\r\n            );\r\n            if (!mounted) return;\r\n            Navigator.of(context)\r\n                .pushReplacementNamed(RouteGenerator.home);\r\n        } on FirebaseAuthException catch (e) {\r\n            ScaffoldMessenger.of(context).showSnackBar(\r\n            SnackBar(\r\n                content: Text(e.message ?? 'Error'),\r\n            ),\r\n            );\r\n        }\r\n        }\r\n    },\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"sign-up-page"},"children":[{"type":"text","value":"Sign Up Page"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As like as the sign in page we also create a sign up screen and use the same structure. Then we create a signup steps widget in the widgets folder. As I mentioned in the previous post we will use the stepper widget here."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There will be 2 forms in this widget, 2 steps. Firstly, we obtain the credentials from the user, and then we get the information. For each form we need to define controllers and for each text field we need to define controllers and focus nodes. Focus nodes are used to change the focus of the input when the user is done. We use it to switch between text fields. Don't forget to dispose of controllers and focus nodes, otherwise memory leaks may occur."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the steper widget we need to define an index. When the first form is valid the user could continue to fill the second form in this way. After validation of the first form, we will increase the index. We will use conditions to cancel the dynamic. If the index is 0, this means that we are in the first step; and if we cancel it we should go back to sig in screen. But if the index is 1 we should decrease it and return back to the first step."}]},{"type":"element","tag":"code","props":{"code":"Future<void> form1Submit(UserRegister userRegisterer,\r\n    Map<String, String> userRegistererState) async {\r\n  emailExists =\r\n      await userRegisterer.checkEmailExists(emailController.text.trim());\r\n  usernameExists = await userRegisterer\r\n      .checkUsernameExists(usernameController.text.trim());\r\n  if (step1FormKey.currentState!.validate()) {\r\n    isForm1Valid = true;\r\n    userRegistererState['email'] = emailController.text;\r\n    userRegistererState['password'] = passwordController.text;\r\n    userRegistererState['username'] = usernameController.text;\r\n    setState(() {\r\n      _index++;\r\n      nameFocusNode.requestFocus();\r\n    });\r\n  }\r\n}\r\n\r\nFuture<void> form2Submit(Map<String, String> userRegistererState,\r\n    UserRegister userRegisterer, BuildContext context) async {\r\n  if (step2FormKey.currentState!.validate()) {\r\n    isForm2Valid = true;\r\n    userRegistererState['name'] = nameController.text;\r\n    userRegistererState['bio'] = bioController.text;\r\n    userRegistererState['location'] = locationController.text;\r\n    userRegistererState['website'] = websiteController.text;\r\n    if (await userRegisterer.tryRegister()) {\r\n      Navigator.of(context).pushReplacementNamed(RouteGenerator.home);\r\n    }\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"Future<void> form1Submit(UserRegister userRegisterer,\r\n    Map<String, String> userRegistererState) async {\r\n  emailExists =\r\n      await userRegisterer.checkEmailExists(emailController.text.trim());\r\n  usernameExists = await userRegisterer\r\n      .checkUsernameExists(usernameController.text.trim());\r\n  if (step1FormKey.currentState!.validate()) {\r\n    isForm1Valid = true;\r\n    userRegistererState['email'] = emailController.text;\r\n    userRegistererState['password'] = passwordController.text;\r\n    userRegistererState['username'] = usernameController.text;\r\n    setState(() {\r\n      _index++;\r\n      nameFocusNode.requestFocus();\r\n    });\r\n  }\r\n}\r\n\r\nFuture<void> form2Submit(Map<String, String> userRegistererState,\r\n    UserRegister userRegisterer, BuildContext context) async {\r\n  if (step2FormKey.currentState!.validate()) {\r\n    isForm2Valid = true;\r\n    userRegistererState['name'] = nameController.text;\r\n    userRegistererState['bio'] = bioController.text;\r\n    userRegistererState['location'] = locationController.text;\r\n    userRegistererState['website'] = websiteController.text;\r\n    if (await userRegisterer.tryRegister()) {\r\n      Navigator.of(context).pushReplacementNamed(RouteGenerator.home);\r\n    }\r\n  }\r\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The validation of forms works the same way as we did in the sign in form. After the second form is filled and verified, we try to sign up the user. For this we need to create some providers and a user model."}]},{"type":"element","tag":"h4","props":{"id":"user-model"},"children":[{"type":"text","value":"User Model"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First, let's start with the user model class. This class will hold the user's information that we gather from the database."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We create a user file in the models and create a user class in it. We provide all the fields that I mentioned in the previous post as well as the ID field in addition. For some relational purposes we use the ID field, so it needs to be here. After that, we create a null-safe constructor for it, so even if we don't gather all the fields, we won't get any errors. As a final step we need to write from and to JSON functions. With these functions we could create new users and convert the Firestore data to a user object."}]},{"type":"element","tag":"code","props":{"code":"class User {\r\n  String? bio;\r\n  DateTime? createdAt;\r\n  List<dynamic>? followings;\r\n  List<dynamic>? followers;\r\n  List<dynamic>? tweets;\r\n  String? id;\r\n  String? link;\r\n  String? location;\r\n  String? name;\r\n  String? username;\r\n\r\n  User({\r\n    this.bio,\r\n    this.createdAt,\r\n    this.followings,\r\n    this.followers,\r\n    this.id,\r\n    this.link,\r\n    this.location,\r\n    this.name,\r\n    this.username,\r\n    this.tweets,\r\n  });\r\n\r\n  factory User.fromJson(Map<String, dynamic> json) {\r\n    return User(\r\n      bio: json['bio'] as String?,\r\n      createdAt: (json['createdAt'] as Timestamp).toDate(),\r\n      followings: json['followings'] as List<dynamic>?,\r\n      followers: json['followers'] as List<dynamic>?,\r\n      id: json['id'] as String,\r\n      link: json['link'] as String?,\r\n      location: json['location'] as String?,\r\n      name: json['name'] as String,\r\n      username: json['username'] as String,\r\n      tweets: json['tweets'] as List<dynamic>?,\r\n    );\r\n  }\r\n\r\n  Map<String, dynamic> toJson() {\r\n    return {\r\n      'bio': bio,\r\n      'createdAt': createdAt,\r\n      'followings': followings,\r\n      'followers': followers,\r\n      'id': id,\r\n      'link': link,\r\n      'location': location,\r\n      'name': name,\r\n      'username': username,\r\n      'tweets': tweets,\r\n    };\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class User {\r\n  String? bio;\r\n  DateTime? createdAt;\r\n  List<dynamic>? followings;\r\n  List<dynamic>? followers;\r\n  List<dynamic>? tweets;\r\n  String? id;\r\n  String? link;\r\n  String? location;\r\n  String? name;\r\n  String? username;\r\n\r\n  User({\r\n    this.bio,\r\n    this.createdAt,\r\n    this.followings,\r\n    this.followers,\r\n    this.id,\r\n    this.link,\r\n    this.location,\r\n    this.name,\r\n    this.username,\r\n    this.tweets,\r\n  });\r\n\r\n  factory User.fromJson(Map<String, dynamic> json) {\r\n    return User(\r\n      bio: json['bio'] as String?,\r\n      createdAt: (json['createdAt'] as Timestamp).toDate(),\r\n      followings: json['followings'] as List<dynamic>?,\r\n      followers: json['followers'] as List<dynamic>?,\r\n      id: json['id'] as String,\r\n      link: json['link'] as String?,\r\n      location: json['location'] as String?,\r\n      name: json['name'] as String,\r\n      username: json['username'] as String,\r\n      tweets: json['tweets'] as List<dynamic>?,\r\n    );\r\n  }\r\n\r\n  Map<String, dynamic> toJson() {\r\n    return {\r\n      'bio': bio,\r\n      'createdAt': createdAt,\r\n      'followings': followings,\r\n      'followers': followers,\r\n      'id': id,\r\n      'link': link,\r\n      'location': location,\r\n      'name': name,\r\n      'username': username,\r\n      'tweets': tweets,\r\n    };\r\n  }\r\n}\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"user-providers"},"children":[{"type":"text","value":"User Providers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this step we will create some providers for serving user's information through our app. First provider I want to implement is a stream provider that serves user's stream from Firebase Auth service. Another one is also a stream provider that provides the current user's profile information. This stream will return the user object that we created previously. Other than that, there is a future provider that will serve the current user's followings. Instead, we could use the profile provider, but I thought this would lead to cleaner code. And finally we create a state notifier provider. This provider is used for user registration. With this provider we serve the class UserRegister that we are about to create. With this class we hold information between steps of sign up widget and attempting to register the user."}]},{"type":"element","tag":"code","props":{"code":"final userStreamProvider = StreamProvider<User?>((ref) {\r\n  return FirebaseAuth.instance.authStateChanges();\r\n});\r\n\r\nfinal userProfileProvider = StreamProvider.autoDispose<User?>((ref) {\r\n  final userStream = ref.watch(userStreamProvider);\r\n  final user = userStream.asData?.value;\r\n  if (user == null) {\r\n    return const Stream.empty();\r\n  }\r\n  return FirebaseFirestore.instance\r\n      .collection('users')\r\n      .doc(user.uid)\r\n      .snapshots()\r\n      .map((snapshot) => User.fromJson(snapshot.data()!));\r\n});\r\n\r\nfinal userFollowingsProvider = FutureProvider((ref) async {\r\n  final userStream = ref.watch(userStreamProvider);\r\n  final user = userStream.asData?.value;\r\n  if (user == null) {\r\n    return const Stream.empty();\r\n  }\r\n  final userDoc =\r\n      await FirebaseFirestore.instance.collection('users').doc(user.uid).get();\r\n\r\n  final userFollowings = userDoc.data()!['followings'] as List<dynamic>;\r\n\r\n  return userFollowings;\r\n});\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"final userStreamProvider = StreamProvider<User?>((ref) {\r\n  return FirebaseAuth.instance.authStateChanges();\r\n});\r\n\r\nfinal userProfileProvider = StreamProvider.autoDispose<User?>((ref) {\r\n  final userStream = ref.watch(userStreamProvider);\r\n  final user = userStream.asData?.value;\r\n  if (user == null) {\r\n    return const Stream.empty();\r\n  }\r\n  return FirebaseFirestore.instance\r\n      .collection('users')\r\n      .doc(user.uid)\r\n      .snapshots()\r\n      .map((snapshot) => User.fromJson(snapshot.data()!));\r\n});\r\n\r\nfinal userFollowingsProvider = FutureProvider((ref) async {\r\n  final userStream = ref.watch(userStreamProvider);\r\n  final user = userStream.asData?.value;\r\n  if (user == null) {\r\n    return const Stream.empty();\r\n  }\r\n  final userDoc =\r\n      await FirebaseFirestore.instance.collection('users').doc(user.uid).get();\r\n\r\n  final userFollowings = userDoc.data()!['followings'] as List<dynamic>;\r\n\r\n  return userFollowings;\r\n});\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The class extends the StateNotifier class. As a constructor, we will create an emty map. We store all the information on this map. In this class, there are two functions to check if the entered email address or username already exists. We do this by using a firestore collection for each. And finally we have the tryRegister function that tried to register the user. Via the map we defined, first we create an account with Firebase Auth. Then using the id that firebase gave to user, we create a document and store all the profile information of user in it. Finally, we add the username and email to our database for further user registration checks."}]},{"type":"element","tag":"code","props":{"code":"final userRegisterProvider =\r\n    StateNotifierProvider<UserRegister, Map<String, String>>(\r\n  (ref) => UserRegister(),\r\n);\r\n\r\nclass UserRegister extends StateNotifier<Map<String, String>> {\r\n  UserRegister() : super({});\r\n\r\n  Future<bool> checkUsernameExists(String username) async {\r\n    final usernames = await FirebaseFirestore.instance\r\n        .collection('credentials')\r\n        .doc('usernames')\r\n        .get();\r\n\r\n    return (usernames.data()!['usernames'] as List<dynamic>).contains(username);\r\n  }\r\n\r\n  Future<bool> checkEmailExists(String email) async {\r\n    final emails = await FirebaseFirestore.instance\r\n        .collection('credentials')\r\n        .doc('emails')\r\n        .get();\r\n\r\n    return (emails.data()!['emails'] as List<dynamic>).contains(email);\r\n  }\r\n\r\n  Future<bool> tryRegister() async {\r\n    if (state['username'] == null) {\r\n      return Future.value(false);\r\n    }\r\n    if (state['email'] == null) {\r\n      return Future.value(false);\r\n    }\r\n    if (state['password'] == null) {\r\n      return Future.value(false);\r\n    }\r\n    if (state['name'] == null) {\r\n      return Future.value(false);\r\n    }\r\n    final UserCredential newUser;\r\n    // Register user via Firebase Auth\r\n    try {\r\n      newUser = await FirebaseAuth.instance.createUserWithEmailAndPassword(\r\n        email: state['email']!,\r\n        password: state['password']!,\r\n      );\r\n    } catch (e) {\r\n      return Future.value(false);\r\n    }\r\n    FirebaseFirestore.instance\r\n      // Save user info to Firestore\r\n      ..collection('users').doc(newUser.user!.uid).set({\r\n        'id': newUser.user!.uid,\r\n        'name': state['name'],\r\n        'username': state['username'],\r\n        'email': state['email'],\r\n        'bio': state['bio'] ?? '',\r\n        'location': state['location'] ?? '',\r\n        'website': state['website'] ?? '',\r\n        'createdAt': DateTime.now(),\r\n        'followers': [newUser.user!.uid],\r\n        'followings': [],\r\n        'likes': [],\r\n        'tweets': [],\r\n      })\r\n      // Add username to username list\r\n      ..collection('credentials').doc('usernames').update({\r\n        'usernames': FieldValue.arrayUnion([state['username']]),\r\n      })\r\n      // Add email to email list\r\n      ..collection('credentials').doc('emails').update({\r\n        'emails': FieldValue.arrayUnion([state['email']]),\r\n      });\r\n    return Future.value(true);\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"final userRegisterProvider =\r\n    StateNotifierProvider<UserRegister, Map<String, String>>(\r\n  (ref) => UserRegister(),\r\n);\r\n\r\nclass UserRegister extends StateNotifier<Map<String, String>> {\r\n  UserRegister() : super({});\r\n\r\n  Future<bool> checkUsernameExists(String username) async {\r\n    final usernames = await FirebaseFirestore.instance\r\n        .collection('credentials')\r\n        .doc('usernames')\r\n        .get();\r\n\r\n    return (usernames.data()!['usernames'] as List<dynamic>).contains(username);\r\n  }\r\n\r\n  Future<bool> checkEmailExists(String email) async {\r\n    final emails = await FirebaseFirestore.instance\r\n        .collection('credentials')\r\n        .doc('emails')\r\n        .get();\r\n\r\n    return (emails.data()!['emails'] as List<dynamic>).contains(email);\r\n  }\r\n\r\n  Future<bool> tryRegister() async {\r\n    if (state['username'] == null) {\r\n      return Future.value(false);\r\n    }\r\n    if (state['email'] == null) {\r\n      return Future.value(false);\r\n    }\r\n    if (state['password'] == null) {\r\n      return Future.value(false);\r\n    }\r\n    if (state['name'] == null) {\r\n      return Future.value(false);\r\n    }\r\n    final UserCredential newUser;\r\n    // Register user via Firebase Auth\r\n    try {\r\n      newUser = await FirebaseAuth.instance.createUserWithEmailAndPassword(\r\n        email: state['email']!,\r\n        password: state['password']!,\r\n      );\r\n    } catch (e) {\r\n      return Future.value(false);\r\n    }\r\n    FirebaseFirestore.instance\r\n      // Save user info to Firestore\r\n      ..collection('users').doc(newUser.user!.uid).set({\r\n        'id': newUser.user!.uid,\r\n        'name': state['name'],\r\n        'username': state['username'],\r\n        'email': state['email'],\r\n        'bio': state['bio'] ?? '',\r\n        'location': state['location'] ?? '',\r\n        'website': state['website'] ?? '',\r\n        'createdAt': DateTime.now(),\r\n        'followers': [newUser.user!.uid],\r\n        'followings': [],\r\n        'likes': [],\r\n        'tweets': [],\r\n      })\r\n      // Add username to username list\r\n      ..collection('credentials').doc('usernames').update({\r\n        'usernames': FieldValue.arrayUnion([state['username']]),\r\n      })\r\n      // Add email to email list\r\n      ..collection('credentials').doc('emails').update({\r\n        'emails': FieldValue.arrayUnion([state['email']]),\r\n      });\r\n    return Future.value(true);\r\n  }\r\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once we have defined all the necessary things, we will use them to authenticate the user and show the timeline, our homepage."}]},{"type":"element","tag":"h3","props":{"id":"timeline"},"children":[{"type":"text","value":"Timeline"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As I mentioned, the timeline page is meant to be our homepage. In this page we display all the tweets, retweets and replies that user and user's followings have."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As we did in authentication screens we create a timeline screen in the routes folder and add it to our route generator. The page has a scaffold widget that holds the app bar, navigation drawer we are about to create, body and the floating action button to post a new tweet."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the app bar's title, I'm intending to insert a const text widget that writes timeline to the top, and add an action to open the search page. During the planning phase, I thought of creating a separate search page, but it became more logical to create a drawer instead. We use an icon button with a search icon for action lists."}]},{"type":"element","tag":"code","props":{"code":"class TimelineScreen extends StatelessWidget {\r\n  const TimelineScreen({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n        appBar: AppBar(\r\n          title: const Text('Timeline'),\r\n          actions: [\r\n            IconButton(\r\n              onPressed: () {\r\n                Navigator.of(context).pushNamed(RouteGenerator.search);\r\n              },\r\n              icon: const Icon(Icons.search),\r\n            )\r\n          ],\r\n        ),\r\n        drawer: NavigationDrawerWidget(pageContext: context),\r\n        body: const TweetListview(),\r\n        floatingActionButton: FloatingActionButton(\r\n          onPressed: () {\r\n            Navigator.pushNamed(context, RouteGenerator.newTweet);\r\n          },\r\n          child: const Icon(Icons.add),\r\n        ));\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class TimelineScreen extends StatelessWidget {\r\n  const TimelineScreen({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n        appBar: AppBar(\r\n          title: const Text('Timeline'),\r\n          actions: [\r\n            IconButton(\r\n              onPressed: () {\r\n                Navigator.of(context).pushNamed(RouteGenerator.search);\r\n              },\r\n              icon: const Icon(Icons.search),\r\n            )\r\n          ],\r\n        ),\r\n        drawer: NavigationDrawerWidget(pageContext: context),\r\n        body: const TweetListview(),\r\n        floatingActionButton: FloatingActionButton(\r\n          onPressed: () {\r\n            Navigator.pushNamed(context, RouteGenerator.newTweet);\r\n          },\r\n          child: const Icon(Icons.add),\r\n        ));\r\n  }\r\n}\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"navigation-drawer"},"children":[{"type":"text","value":"Navigation Drawer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The navigation drawer has two purposes. Firstly, it displays current user stats, and secondly, it shows routes. For this widget we create a navigation drawer widget file in our widgets folder. This widget doesn't require any state, so we define it as stateless."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I'm planning to use the profile screen to display every profile, not just the profile of current users. Because of this, I will create a new provider to hold which users to show on the profile pages. When we click the profile button in this drawer, this provider will hold the current user's ID for us. Later in the profile page we'll use this information."}]},{"type":"element","tag":"code","props":{"code":"final whichProfileToShowProvider = StateProvider<String>(\r\n  (ref) => '',\r\n);\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"final whichProfileToShowProvider = StateProvider<String>(\r\n  (ref) => '',\r\n);\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For user's stats, we'll use a drawer header widget with a column as a child. In that column we show a dummy profile image, user's name, bio, following and follower stats. We fetch these information from the provider that we defined in the previous part."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For navigation buttons, we'll use List tiles with dedicated icons as leading. Because we create static strings for route names, we can easily navigate using those."}]},{"type":"element","tag":"code","props":{"code":"ListTile(\r\n  leading: const Icon(Icons.home),\r\n  title: const Text('Home'),\r\n  onTap: () {\r\n    Navigator.pushReplacementNamed(pageContext, RouteGenerator.home);\r\n  },\r\n),\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"ListTile(\r\n  leading: const Icon(Icons.home),\r\n  title: const Text('Home'),\r\n  onTap: () {\r\n    Navigator.pushReplacementNamed(pageContext, RouteGenerator.home);\r\n  },\r\n),\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"tweet-model"},"children":[{"type":"text","value":"Tweet Model"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Before creating the body, we need to build the tweet model. As we did in the user model, we declare all the fields that we used in firestore. In addition, we include the tweet's ID. We create a constructor that initializes all the fields and implement from and to JSON methods. In the from JSON method, we focus on the original tweet field. When we are fetching a tweet, if it has an original tweet, we need to fetch it as well."}]},{"type":"element","tag":"code","props":{"code":"class Tweet {\r\n  String? id;\r\n  String? body;\r\n  DateTime? createdAt;\r\n  List<dynamic>? likes;\r\n  List<dynamic>? media;\r\n  dynamic originalTweet;\r\n  List<dynamic>? replies;\r\n  List<dynamic>? retweets;\r\n  TweetType? type;\r\n  Future<User>? user;\r\n  String? userId;\r\n  List<dynamic>? hashtags;\r\n  List<dynamic>? mentions;\r\n\r\n  Tweet({\r\n    this.id,\r\n    this.body,\r\n    this.createdAt,\r\n    this.likes,\r\n    this.media,\r\n    this.originalTweet,\r\n    this.replies,\r\n    this.retweets,\r\n    this.type,\r\n    this.user,\r\n    this.userId,\r\n    this.hashtags,\r\n    this.mentions,\r\n  });\r\n\r\n  factory Tweet.fromJson(Map<String, dynamic> json, String? id) {\r\n    final Future<Tweet>? orgTweet;\r\n    if (json['originalTweet'] == null) {\r\n      orgTweet = null;\r\n    } else {\r\n      orgTweet = (json['originalTweet'] as DocumentReference).get().then(\r\n          (value) =>\r\n              Tweet.fromJson(value.data()! as Map<String, dynamic>, value.id));\r\n    }\r\n    return Tweet(\r\n      id: id,\r\n      body: json['body'] as String?,\r\n      createdAt: (json['createdAt'] as Timestamp).toDate(),\r\n      likes: json['likes'] as List<dynamic>?,\r\n      media: json['media'] as List<dynamic>?,\r\n      originalTweet: orgTweet,\r\n      replies: json['replies'] as List<dynamic>?,\r\n      retweets: json['retweets'] as List<dynamic>?,\r\n      type: _getTypeFromString(json['type']),\r\n      user: (json['user'] as DocumentReference).get().then(\r\n          (value) => User.fromJson(value.data()! as Map<String, dynamic>)),\r\n      userId: json['userId'] as String?,\r\n      hashtags: json['hashtags'] as List<dynamic>?,\r\n      mentions: json['mentions'] as List<dynamic>?,\r\n    );\r\n  }\r\n\r\n  Map<String, dynamic> toJson() {\r\n    final userDoc = FirebaseFirestore.instance.collection('users').doc(userId);\r\n    return {\r\n      'id': id,\r\n      'body': body,\r\n      'createdAt': createdAt,\r\n      'likes': likes ?? [],\r\n      'originalTweet': originalTweet,\r\n      'replies': replies ?? [],\r\n      'retweets': retweets ?? [],\r\n      'type': type?.name,\r\n      'user': userDoc,\r\n      'userId': userId,\r\n      'hashtags': hashtags ?? [],\r\n      'mentions': mentions ?? [],\r\n    };\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class Tweet {\r\n  String? id;\r\n  String? body;\r\n  DateTime? createdAt;\r\n  List<dynamic>? likes;\r\n  List<dynamic>? media;\r\n  dynamic originalTweet;\r\n  List<dynamic>? replies;\r\n  List<dynamic>? retweets;\r\n  TweetType? type;\r\n  Future<User>? user;\r\n  String? userId;\r\n  List<dynamic>? hashtags;\r\n  List<dynamic>? mentions;\r\n\r\n  Tweet({\r\n    this.id,\r\n    this.body,\r\n    this.createdAt,\r\n    this.likes,\r\n    this.media,\r\n    this.originalTweet,\r\n    this.replies,\r\n    this.retweets,\r\n    this.type,\r\n    this.user,\r\n    this.userId,\r\n    this.hashtags,\r\n    this.mentions,\r\n  });\r\n\r\n  factory Tweet.fromJson(Map<String, dynamic> json, String? id) {\r\n    final Future<Tweet>? orgTweet;\r\n    if (json['originalTweet'] == null) {\r\n      orgTweet = null;\r\n    } else {\r\n      orgTweet = (json['originalTweet'] as DocumentReference).get().then(\r\n          (value) =>\r\n              Tweet.fromJson(value.data()! as Map<String, dynamic>, value.id));\r\n    }\r\n    return Tweet(\r\n      id: id,\r\n      body: json['body'] as String?,\r\n      createdAt: (json['createdAt'] as Timestamp).toDate(),\r\n      likes: json['likes'] as List<dynamic>?,\r\n      media: json['media'] as List<dynamic>?,\r\n      originalTweet: orgTweet,\r\n      replies: json['replies'] as List<dynamic>?,\r\n      retweets: json['retweets'] as List<dynamic>?,\r\n      type: _getTypeFromString(json['type']),\r\n      user: (json['user'] as DocumentReference).get().then(\r\n          (value) => User.fromJson(value.data()! as Map<String, dynamic>)),\r\n      userId: json['userId'] as String?,\r\n      hashtags: json['hashtags'] as List<dynamic>?,\r\n      mentions: json['mentions'] as List<dynamic>?,\r\n    );\r\n  }\r\n\r\n  Map<String, dynamic> toJson() {\r\n    final userDoc = FirebaseFirestore.instance.collection('users').doc(userId);\r\n    return {\r\n      'id': id,\r\n      'body': body,\r\n      'createdAt': createdAt,\r\n      'likes': likes ?? [],\r\n      'originalTweet': originalTweet,\r\n      'replies': replies ?? [],\r\n      'retweets': retweets ?? [],\r\n      'type': type?.name,\r\n      'user': userDoc,\r\n      'userId': userId,\r\n      'hashtags': hashtags ?? [],\r\n      'mentions': mentions ?? [],\r\n    };\r\n  }\r\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Other than these methods, we need to create methods to like and dislike the tweet, retweet and unretweet the tweet and reply to the tweet."}]},{"type":"element","tag":"code","props":{"code":"void _like(String? userId) {\r\n  likes!.add(userId);\r\n  FirebaseFirestore.instance.collection('tweets').doc(id).update({\r\n    'likes': FieldValue.arrayUnion([userId])\r\n  });\r\n  final currentUser = auth.FirebaseAuth.instance.currentUser;\r\n  if (currentUser != null) {\r\n    FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(currentUser.uid)\r\n        .update({\r\n      'likes': FieldValue.arrayUnion([id])\r\n    });\r\n  }\r\n}\r\n\r\nvoid _dislike(String? userId) {\r\n  likes!.remove(userId);\r\n  FirebaseFirestore.instance\r\n      .collection('tweets')\r\n      .doc(id)\r\n      .update({'likes': likes});\r\n  final currentUser = auth.FirebaseAuth.instance.currentUser;\r\n  if (currentUser != null) {\r\n    FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(currentUser.uid)\r\n        .update({\r\n      'likes': FieldValue.arrayRemove([id])\r\n    });\r\n  }\r\n}\r\n\r\nvoid likeDislike(String? userId) {\r\n  if (likes!.contains(userId)) {\r\n    _dislike(userId);\r\n  } else {\r\n    _like(userId);\r\n  }\r\n}\r\n\r\nvoid _retweet(String? userId) async {\r\n  retweets!.add(userId);\r\n  final tweetDoc = FirebaseFirestore.instance.collection('tweets').doc(id);\r\n  tweetDoc.update({\r\n    'retweets': FieldValue.arrayUnion([userId])\r\n  });\r\n  final newRetweet = Tweet(\r\n    body: \"\",\r\n    type: TweetType.retweet,\r\n    userId: userId,\r\n    createdAt: DateTime.now(),\r\n    originalTweet: tweetDoc,\r\n  );\r\n  final newRetweetDoc = await FirebaseFirestore.instance\r\n      .collection('tweets')\r\n      .add(newRetweet.toJson());\r\n  newRetweetDoc.update({\r\n    'id': newRetweetDoc.id,\r\n  });\r\n  final currentUser = auth.FirebaseAuth.instance.currentUser;\r\n  if (currentUser != null) {\r\n    FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(currentUser.uid)\r\n        .update({\r\n      'tweets': FieldValue.arrayUnion([newRetweetDoc.id])\r\n    });\r\n  }\r\n}\r\n\r\nvoid _unretweet(String? userId) async {\r\n  retweets!.remove(userId);\r\n  final tweetDoc = FirebaseFirestore.instance.collection('tweets').doc(id);\r\n  tweetDoc.update({\r\n    'retweets': FieldValue.arrayRemove([userId])\r\n  });\r\n  final currentUser =\r\n      FirebaseFirestore.instance.collection('users').doc(userId);\r\n  final retweetDoc = await FirebaseFirestore.instance\r\n      .collection('tweets')\r\n      .where('originalTweet', isEqualTo: tweetDoc)\r\n      .where('userId', isEqualTo: currentUser.id)\r\n      .get();\r\n  retweetDoc.docs.first.reference.delete();\r\n  currentUser.update({\r\n    'tweets': FieldValue.arrayRemove([retweetDoc.docs.first.id])\r\n  });\r\n}\r\n\r\nvoid retweetUnretweet(String? userId) {\r\n  if (retweets!.contains(userId)) {\r\n    _unretweet(userId);\r\n  } else {\r\n    _retweet(userId);\r\n  }\r\n}\r\n\r\nvoid reply(String? userId) {\r\n  replies!.add(userId);\r\n  FirebaseFirestore.instance.collection('tweets').doc(id).update({\r\n    'replies': FieldValue.arrayUnion([userId])\r\n  });\r\n  final currentUser = auth.FirebaseAuth.instance.currentUser;\r\n  if (currentUser != null) {\r\n    FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(currentUser.uid)\r\n        .update({\r\n      'replies': FieldValue.arrayUnion([id])\r\n    });\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"void _like(String? userId) {\r\n  likes!.add(userId);\r\n  FirebaseFirestore.instance.collection('tweets').doc(id).update({\r\n    'likes': FieldValue.arrayUnion([userId])\r\n  });\r\n  final currentUser = auth.FirebaseAuth.instance.currentUser;\r\n  if (currentUser != null) {\r\n    FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(currentUser.uid)\r\n        .update({\r\n      'likes': FieldValue.arrayUnion([id])\r\n    });\r\n  }\r\n}\r\n\r\nvoid _dislike(String? userId) {\r\n  likes!.remove(userId);\r\n  FirebaseFirestore.instance\r\n      .collection('tweets')\r\n      .doc(id)\r\n      .update({'likes': likes});\r\n  final currentUser = auth.FirebaseAuth.instance.currentUser;\r\n  if (currentUser != null) {\r\n    FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(currentUser.uid)\r\n        .update({\r\n      'likes': FieldValue.arrayRemove([id])\r\n    });\r\n  }\r\n}\r\n\r\nvoid likeDislike(String? userId) {\r\n  if (likes!.contains(userId)) {\r\n    _dislike(userId);\r\n  } else {\r\n    _like(userId);\r\n  }\r\n}\r\n\r\nvoid _retweet(String? userId) async {\r\n  retweets!.add(userId);\r\n  final tweetDoc = FirebaseFirestore.instance.collection('tweets').doc(id);\r\n  tweetDoc.update({\r\n    'retweets': FieldValue.arrayUnion([userId])\r\n  });\r\n  final newRetweet = Tweet(\r\n    body: \"\",\r\n    type: TweetType.retweet,\r\n    userId: userId,\r\n    createdAt: DateTime.now(),\r\n    originalTweet: tweetDoc,\r\n  );\r\n  final newRetweetDoc = await FirebaseFirestore.instance\r\n      .collection('tweets')\r\n      .add(newRetweet.toJson());\r\n  newRetweetDoc.update({\r\n    'id': newRetweetDoc.id,\r\n  });\r\n  final currentUser = auth.FirebaseAuth.instance.currentUser;\r\n  if (currentUser != null) {\r\n    FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(currentUser.uid)\r\n        .update({\r\n      'tweets': FieldValue.arrayUnion([newRetweetDoc.id])\r\n    });\r\n  }\r\n}\r\n\r\nvoid _unretweet(String? userId) async {\r\n  retweets!.remove(userId);\r\n  final tweetDoc = FirebaseFirestore.instance.collection('tweets').doc(id);\r\n  tweetDoc.update({\r\n    'retweets': FieldValue.arrayRemove([userId])\r\n  });\r\n  final currentUser =\r\n      FirebaseFirestore.instance.collection('users').doc(userId);\r\n  final retweetDoc = await FirebaseFirestore.instance\r\n      .collection('tweets')\r\n      .where('originalTweet', isEqualTo: tweetDoc)\r\n      .where('userId', isEqualTo: currentUser.id)\r\n      .get();\r\n  retweetDoc.docs.first.reference.delete();\r\n  currentUser.update({\r\n    'tweets': FieldValue.arrayRemove([retweetDoc.docs.first.id])\r\n  });\r\n}\r\n\r\nvoid retweetUnretweet(String? userId) {\r\n  if (retweets!.contains(userId)) {\r\n    _unretweet(userId);\r\n  } else {\r\n    _retweet(userId);\r\n  }\r\n}\r\n\r\nvoid reply(String? userId) {\r\n  replies!.add(userId);\r\n  FirebaseFirestore.instance.collection('tweets').doc(id).update({\r\n    'replies': FieldValue.arrayUnion([userId])\r\n  });\r\n  final currentUser = auth.FirebaseAuth.instance.currentUser;\r\n  if (currentUser != null) {\r\n    FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(currentUser.uid)\r\n        .update({\r\n      'replies': FieldValue.arrayUnion([id])\r\n    });\r\n  }\r\n}\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"body-the-timeline-widget"},"children":[{"type":"text","value":"Body: The Timeline widget"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After the drawer, the one critical missing part is the body of the screen. For body we'll create a tweet listview widget in our widgets directory. Again this widget is a stateless widget."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While planning, I mentioned that I wanted to paginate the timeline stream. For pagination, I used a package called Paginate Firestore. This package handles all the pagination related stuff, so we don't need to write extra code for it. I will, however, show you my idea of how it could be done without it."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For this, I added a new provider in our providers file called timeline provider. This provider will be a StateNotifierProvider, and keep track of a timeline class that we are about to implement and return a list of tweets. The timeline class will extend the StateNotifier class. During the creation of the class, we create an empty list and call the init method. We create a separate init class because we will do some asynchronous work in it that we can't do in the class constructor."}]},{"type":"element","tag":"code","props":{"code":"final timelineProvider = StateNotifierProvider<Timeline, List<Tweet>>((ref) {\r\n  return Timeline();\r\n});\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"final timelineProvider = StateNotifierProvider<Timeline, List<Tweet>>((ref) {\r\n  return Timeline();\r\n});\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the init method. We get the current user from Firebase Auth. Next, we get the following information from Firestore about the user. Finally, we query Firestore. We query the tweets collection where the creator of the tweet's id is in the user's followings list. We order it by creation time and limit it by number. Finally we need to map each returned value from this query. In this way we create a list of tweet objects with the given limit."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Via this initialization we get the latest tweets of user's followings; but we want to fetch more tweets. For this we create a new method, load more. For loading more we need to know the last document that Firestore returned. To solve this we create a class variable called last document and in the init method we initialize it to the last document that query returned. There is only one thing we are going to add to this method, which is start after document query selector. We reinitialize the last document after querying. We convert them to tweets and add them all to the list. To use this future in a listview widget in the timeline widget, we need to use a scroll indicator widget. With the scroll indicator, we could know that the user is at the bottom of the page and run the load more function to fetch tweets."}]},{"type":"element","tag":"code","props":{"code":"class Timeline extends StateNotifier<List<Tweet>> {\r\n  DocumentSnapshot? lastDocument;\r\n  User? user;\r\n  User? userProfile;\r\n\r\n  Timeline({this.lastDocument}) : super([]) {\r\n    init();\r\n  }\r\n\r\n  void init() async {\r\n    user = FirebaseAuth.instance.currentUser!;\r\n\r\n    userProfile = await FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(user?.uid)\r\n        .get()\r\n        .then((value) => User.fromJson(value.data()!));\r\n\r\n    state = await FirebaseFirestore.instance\r\n        .collection('tweets')\r\n        .where('userId', whereIn: userProfile?.followings)\r\n        .orderBy('createdAt', descending: true)\r\n        .limit(5)\r\n        .get()\r\n        .then((value) {\r\n      lastDocument = value.docs.last;\r\n      return value.docs\r\n          .map((doc) => Tweet.fromJson(doc.data(), doc.id))\r\n          .toList();\r\n    });\r\n  }\r\n\r\n  void loadMore() async {\r\n    try {\r\n      final newTweets = await FirebaseFirestore.instance\r\n          .collection('tweets')\r\n          .where('userId', whereIn: userProfile?.followings)\r\n          .orderBy('createdAt', descending: true)\r\n          .startAfterDocument(lastDocument!)\r\n          .limit(5)\r\n          .get()\r\n          .then((value) {\r\n        lastDocument = value.docs[value.size - 1];\r\n        return value.docs\r\n            .map((doc) => Tweet.fromJson(doc.data(), doc.id))\r\n            .toList();\r\n      });\r\n      state = [...state, ...newTweets];\r\n    } catch (e) {\r\n      debugPrint(e.toString());\r\n    }\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class Timeline extends StateNotifier<List<Tweet>> {\r\n  DocumentSnapshot? lastDocument;\r\n  User? user;\r\n  User? userProfile;\r\n\r\n  Timeline({this.lastDocument}) : super([]) {\r\n    init();\r\n  }\r\n\r\n  void init() async {\r\n    user = FirebaseAuth.instance.currentUser!;\r\n\r\n    userProfile = await FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(user?.uid)\r\n        .get()\r\n        .then((value) => User.fromJson(value.data()!));\r\n\r\n    state = await FirebaseFirestore.instance\r\n        .collection('tweets')\r\n        .where('userId', whereIn: userProfile?.followings)\r\n        .orderBy('createdAt', descending: true)\r\n        .limit(5)\r\n        .get()\r\n        .then((value) {\r\n      lastDocument = value.docs.last;\r\n      return value.docs\r\n          .map((doc) => Tweet.fromJson(doc.data(), doc.id))\r\n          .toList();\r\n    });\r\n  }\r\n\r\n  void loadMore() async {\r\n    try {\r\n      final newTweets = await FirebaseFirestore.instance\r\n          .collection('tweets')\r\n          .where('userId', whereIn: userProfile?.followings)\r\n          .orderBy('createdAt', descending: true)\r\n          .startAfterDocument(lastDocument!)\r\n          .limit(5)\r\n          .get()\r\n          .then((value) {\r\n        lastDocument = value.docs[value.size - 1];\r\n        return value.docs\r\n            .map((doc) => Tweet.fromJson(doc.data(), doc.id))\r\n            .toList();\r\n      });\r\n      state = [...state, ...newTweets];\r\n    } catch (e) {\r\n      debugPrint(e.toString());\r\n    }\r\n  }\r\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"However, instead of this, I use the paginate Firestore package to handle this. It paginates and fetches more tweets on scroll. Additionally, it displays the live feed. All we need to do is add it to the widget and give it the query."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For building each item that Firestore returned, it uses an item builder. First, we need to convert each item to a tweet object. Than we check the type of tweet and load the dedicated widget to display the tweet in the correct form."}]},{"type":"element","tag":"code","props":{"code":"PaginateFirestore(\r\n  itemBuilder: (context, documentSnapshots, index) {\r\n    final tweet = Tweet.fromJson(\r\n        documentSnapshots[index].data() as Map<String, dynamic>,\r\n        documentSnapshots[index].id);\r\n    if (tweet.type == TweetType.retweet) {\r\n      return TweetRetweetWidget(\r\n          tweet: tweet, originalTweet: tweet.originalTweet);\r\n    } else if (tweet.type == TweetType.reply) {\r\n      return TweetReplyWidget(\r\n          tweet: tweet, originalTweet: tweet.originalTweet);\r\n    } else {\r\n      return TweetWidget(tweet: tweet);\r\n    }\r\n  },\r\n  query: FirebaseFirestore.instance\r\n      .collection('tweets')\r\n      .where('userId', whereIn: (userFollowings.value as List<dynamic>))\r\n      .orderBy('createdAt', descending: true),\r\n  itemBuilderType: PaginateBuilderType.listView,\r\n  isLive: true,\r\n  itemsPerPage: 20,\r\n  onEmpty: const Center(\r\n    child: Text('No tweets'),\r\n  ),\r\n)\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"PaginateFirestore(\r\n  itemBuilder: (context, documentSnapshots, index) {\r\n    final tweet = Tweet.fromJson(\r\n        documentSnapshots[index].data() as Map<String, dynamic>,\r\n        documentSnapshots[index].id);\r\n    if (tweet.type == TweetType.retweet) {\r\n      return TweetRetweetWidget(\r\n          tweet: tweet, originalTweet: tweet.originalTweet);\r\n    } else if (tweet.type == TweetType.reply) {\r\n      return TweetReplyWidget(\r\n          tweet: tweet, originalTweet: tweet.originalTweet);\r\n    } else {\r\n      return TweetWidget(tweet: tweet);\r\n    }\r\n  },\r\n  query: FirebaseFirestore.instance\r\n      .collection('tweets')\r\n      .where('userId', whereIn: (userFollowings.value as List<dynamic>))\r\n      .orderBy('createdAt', descending: true),\r\n  itemBuilderType: PaginateBuilderType.listView,\r\n  isLive: true,\r\n  itemsPerPage: 20,\r\n  onEmpty: const Center(\r\n    child: Text('No tweets'),\r\n  ),\r\n)\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"tweet-widget"},"children":[{"type":"text","value":"Tweet Widget"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To show the tweet, create a tweet widget in the widgets directory. This widget is also a stateless widget, because we will get the tweet from the timeline widget. I use a card as a wrapper but a column could be used instead. To show user's info, I created another widget to make code more readable. With this widget, we use a future provider to retrieve the user's information and display their name and username. We display a dummy icon as your profile icon."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Finally we display the tweet's body and actions. Again for readability, I created a separate widget for tweet actions."}]},{"type":"element","tag":"code","props":{"code":"// Tweet User widget\r\nWidget build(BuildContext context, WidgetRef ref) {\r\n  final whichProfileToShow = ref.watch(whichProfileToShowProvider.notifier);\r\n\r\n  return FutureBuilder(\r\n    future: user,\r\n    builder: ((context, snapshot) {\r\n      if (snapshot.hasData) {\r\n        return Row(\r\n          mainAxisAlignment: MainAxisAlignment.start,\r\n          children: [\r\n            TextButton(\r\n              onPressed: () {\r\n                whichProfileToShow.state = snapshot.data!.id!;\r\n                Navigator.pushNamed(context, '/profile');\r\n              },\r\n              child: Text(\r\n                snapshot.data!.name ?? 'Loading...',\r\n                style: const TextStyle(fontWeight: FontWeight.w600),\r\n              ),\r\n            ),\r\n            const SizedBox(width: 5),\r\n            Text(\r\n              snapshot.data != null\r\n                  ? '@${snapshot.data!.username}'\r\n                  : 'Loading...',\r\n              style: const TextStyle(color: Colors.grey),\r\n            ),\r\n            const SizedBox(width: 5),\r\n            Text(\r\n              timeago.format(tweetPostTime ?? DateTime.now()),\r\n              style: const TextStyle(color: Colors.grey),\r\n            ),\r\n          ],\r\n        );\r\n      } else {\r\n        return const Text('Loading...');\r\n      }\r\n    }),\r\n  );\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// Tweet User widget\r\nWidget build(BuildContext context, WidgetRef ref) {\r\n  final whichProfileToShow = ref.watch(whichProfileToShowProvider.notifier);\r\n\r\n  return FutureBuilder(\r\n    future: user,\r\n    builder: ((context, snapshot) {\r\n      if (snapshot.hasData) {\r\n        return Row(\r\n          mainAxisAlignment: MainAxisAlignment.start,\r\n          children: [\r\n            TextButton(\r\n              onPressed: () {\r\n                whichProfileToShow.state = snapshot.data!.id!;\r\n                Navigator.pushNamed(context, '/profile');\r\n              },\r\n              child: Text(\r\n                snapshot.data!.name ?? 'Loading...',\r\n                style: const TextStyle(fontWeight: FontWeight.w600),\r\n              ),\r\n            ),\r\n            const SizedBox(width: 5),\r\n            Text(\r\n              snapshot.data != null\r\n                  ? '@${snapshot.data!.username}'\r\n                  : 'Loading...',\r\n              style: const TextStyle(color: Colors.grey),\r\n            ),\r\n            const SizedBox(width: 5),\r\n            Text(\r\n              timeago.format(tweetPostTime ?? DateTime.now()),\r\n              style: const TextStyle(color: Colors.grey),\r\n            ),\r\n          ],\r\n        );\r\n      } else {\r\n        return const Text('Loading...');\r\n      }\r\n    }),\r\n  );\r\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the tweet actions we conditionally display actions icons. And use the methods of the given tweet as actions."}]},{"type":"element","tag":"code","props":{"code":"//Tweet actions widget\r\nWidget build(BuildContext context) {\r\nreturn Row(\r\n  mainAxisAlignment: MainAxisAlignment.spaceEvenly,\r\n  children: [\r\n    Row(\r\n      mainAxisSize: MainAxisSize.min,\r\n      children: [\r\n        IconButton(\r\n          color: tweet?.replies\r\n                      ?.contains(FirebaseAuth.instance.currentUser?.uid) ??\r\n                  false\r\n              ? Colors.blue\r\n              : Colors.grey,\r\n          icon: const Icon(Icons.comment),\r\n          onPressed: () {\r\n            showDialog(\r\n              context: context,\r\n              builder: (context) {\r\n                return TweetNewReplyWidget(replyingTweet: tweet!);\r\n              },\r\n            );\r\n          },\r\n          splashRadius: 20,\r\n          tooltip: 'Reply',\r\n        ),\r\n        Text(tweet?.replies?.length.toString() ?? '0'),\r\n      ],\r\n    ),\r\n...\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"//Tweet actions widget\r\nWidget build(BuildContext context) {\r\nreturn Row(\r\n  mainAxisAlignment: MainAxisAlignment.spaceEvenly,\r\n  children: [\r\n    Row(\r\n      mainAxisSize: MainAxisSize.min,\r\n      children: [\r\n        IconButton(\r\n          color: tweet?.replies\r\n                      ?.contains(FirebaseAuth.instance.currentUser?.uid) ??\r\n                  false\r\n              ? Colors.blue\r\n              : Colors.grey,\r\n          icon: const Icon(Icons.comment),\r\n          onPressed: () {\r\n            showDialog(\r\n              context: context,\r\n              builder: (context) {\r\n                return TweetNewReplyWidget(replyingTweet: tweet!);\r\n              },\r\n            );\r\n          },\r\n          splashRadius: 20,\r\n          tooltip: 'Reply',\r\n        ),\r\n        Text(tweet?.replies?.length.toString() ?? '0'),\r\n      ],\r\n    ),\r\n...\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the reply and retweet all we need to do is use this tweet widget to display the original tweet. In retweet we don't have a body so we don't show any text; but in reply we need to show the reply body on top of the original tweet. To prevent some unclear behaviors, I do not include tweet actions in retweets and replies."}]},{"type":"element","tag":"h4","props":{"id":"new-tweet"},"children":[{"type":"text","value":"New Tweet"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The final thing left to do is to compose a new tweet. For this, we also add a separate screen and widget in dedicated folders. I won't use the local state when I create a new tweet because I want to share the tweet information between the screen and widget. In this way there could be a button on the screen to post the tweet. We will need to create a new tweet provider for this purpose. This provider is also a state notifier provider, that provides the new tweet class we are about to implement."}]},{"type":"element","tag":"code","props":{"code":"final newTweetProvider = StateNotifierProvider.autoDispose<NewTweet, Tweet>(\r\n  (ref) => NewTweet(),\r\n);\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"final newTweetProvider = StateNotifierProvider.autoDispose<NewTweet, Tweet>(\r\n  (ref) => NewTweet(),\r\n);\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The new tweet class constructs an empty tweet. It has a function to update the body, set the original tweet and set the type of the tweet. The last method that we need to implement is the post method that saves the tweet object to Firestore. By using the post method, we can handle the behavior I mentioned previously."}]},{"type":"element","tag":"code","props":{"code":"class NewTweet extends StateNotifier<Tweet> {\r\n  NewTweet() : super(Tweet());\r\n\r\n  void updateText(String text) {\r\n    state.body = text;\r\n  }\r\n\r\n  void setOriginalTweet(Tweet tweet) {\r\n    final tweetDoc =\r\n        FirebaseFirestore.instance.collection('tweets').doc(tweet.id);\r\n    state.originalTweet = tweetDoc;\r\n  }\r\n\r\n  void setTweetType(TweetType type) {\r\n    state.type = type;\r\n  }\r\n\r\n  Future<void> post() async {\r\n    final user = FirebaseAuth.instance.currentUser;\r\n    if (user == null) {\r\n      throw Exception('User is not signed in');\r\n    }\r\n    final userDoc = await FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(user.uid)\r\n        .get();\r\n    final userData = userDoc.data();\r\n    if (userData == null) {\r\n      throw Exception('User data is not found');\r\n    }\r\n    final userObj = my_user.User.fromJson(userData);\r\n    final tweet = Tweet(\r\n      body: state.body,\r\n      createdAt: DateTime.now(),\r\n      likes: [],\r\n      media: [],\r\n      originalTweet: state.originalTweet,\r\n      replies: [],\r\n      retweets: [],\r\n      type: state.type ?? TweetType.tweet,\r\n      user: Future.value(userObj),\r\n      userId: user.uid,\r\n      hashtags: state.hashtags,\r\n      mentions: state.mentions,\r\n    );\r\n    final newTweetDoc = await FirebaseFirestore.instance\r\n        .collection('tweets')\r\n        .add(tweet.toJson());\r\n    newTweetDoc.update({'id': newTweetDoc.id});\r\n    await FirebaseFirestore.instance.collection('users').doc(user.uid).update({\r\n      'tweets': FieldValue.arrayUnion([newTweetDoc.id]),\r\n    });\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class NewTweet extends StateNotifier<Tweet> {\r\n  NewTweet() : super(Tweet());\r\n\r\n  void updateText(String text) {\r\n    state.body = text;\r\n  }\r\n\r\n  void setOriginalTweet(Tweet tweet) {\r\n    final tweetDoc =\r\n        FirebaseFirestore.instance.collection('tweets').doc(tweet.id);\r\n    state.originalTweet = tweetDoc;\r\n  }\r\n\r\n  void setTweetType(TweetType type) {\r\n    state.type = type;\r\n  }\r\n\r\n  Future<void> post() async {\r\n    final user = FirebaseAuth.instance.currentUser;\r\n    if (user == null) {\r\n      throw Exception('User is not signed in');\r\n    }\r\n    final userDoc = await FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(user.uid)\r\n        .get();\r\n    final userData = userDoc.data();\r\n    if (userData == null) {\r\n      throw Exception('User data is not found');\r\n    }\r\n    final userObj = my_user.User.fromJson(userData);\r\n    final tweet = Tweet(\r\n      body: state.body,\r\n      createdAt: DateTime.now(),\r\n      likes: [],\r\n      media: [],\r\n      originalTweet: state.originalTweet,\r\n      replies: [],\r\n      retweets: [],\r\n      type: state.type ?? TweetType.tweet,\r\n      user: Future.value(userObj),\r\n      userId: user.uid,\r\n      hashtags: state.hashtags,\r\n      mentions: state.mentions,\r\n    );\r\n    final newTweetDoc = await FirebaseFirestore.instance\r\n        .collection('tweets')\r\n        .add(tweet.toJson());\r\n    newTweetDoc.update({'id': newTweetDoc.id});\r\n    await FirebaseFirestore.instance.collection('users').doc(user.uid).update({\r\n      'tweets': FieldValue.arrayUnion([newTweetDoc.id]),\r\n    });\r\n  }\r\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the widget we need to validate if the tweet body is empty. If this or any other error occurs, we show the snackbar to notify the user."}]},{"type":"element","tag":"h3","props":{"id":"profile"},"children":[{"type":"text","value":"Profile"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Before talking about the profile page, I think that I show enough code to describe the general shape and structure. Therefore, I will not post any code here anymore, but you can find the repository of the project at the end of the post. If you want you can check out dedicated files."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mentioning that, let's talk about the profile page. For the profile page, I created the screen in the routes file and created three widgets to show tweets, retweets and replies of the user separately. I use the page view widget to display these widgets. With the page view widget we also gain to swipe left and right to change the page. Also, I added a bottom navigation bar to show the user which page they are on."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the sub-widgets to display user's tweets, I use the paginate firestore package again. I get the user info from the provider, which determines which user to show on the profile page. Then query the user tweets and show them using the tweet widget, like we did in timeline."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"At the top of the page, I created a profile header widget to display the information of the user that we hold in Firestore. Also I display tweet count as well as following and follower counts."}]},{"type":"element","tag":"h3","props":{"id":"explore"},"children":[{"type":"text","value":"Explore"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To begin with, I want to say that the explore page frustrates me. Because we can't define cloud functions for free in Firebase. To avoid this, I created a dummy trending topics collection in Firestore."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Before implementing this page, I added hashtags and mentions to the tweet model. They contain the mentions and hashtags the user enters. To detect mentions and hashtags, I used another package called detectable text field. This package provides us with brand-new text and text field widgets. The text widget displays the detected entities in different colors and makes them clickable. When the user clicks a hashtag we will navigate to the dedicated hashtag page. And when the user clicks on the mention we'll show the profile of that user. The text field is also capable of detecting entities. It reformats the detected entity in different colors and gives us a list of entities that are detected. This way, we can add mentions and hashtags to the tweet's dedicated fields."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I created a screen and a widget for the explore page. In the widget, I used a future builder to get trending topics from Firestore. The same as in the profile, I created a provider to store the hashtag information that a user presses for display. For displaying hashtags, I built a separate screen and widget. In this widget I used the paginate Firestore extension to display tweets whose hashtag field contains the hashtag."}]},{"type":"element","tag":"h3","props":{"id":"messages"},"children":[{"type":"text","value":"Messages"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Last but not least, we are here to create instant messaging. The messaging widget could be considered a separate app, but I added it to increase my practice. First of all, we need to create models for messages and chats."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Firestore message collection will contain the message id, creation time, sender's and receiver's IDs, and a list of the respective IDs for further checks. We populate the message class with these fields and also implement the from and to JSON methods. Besides these methods, I also implemented methods that return the user of the sender and receiver. Moreover, I created a method to create a new message, create a new chat message, a method to check if chat exists."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In each message, we store chat messages as a collection, not as a field. With this approach, our querying capabilities increase and we could use the paginate firestore extension. An individual chat message consists of a body, a creation time, a from, and an is read field. For this collection, we also implement a chat message model and methods needed."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When we look at the messages widget, we query the messages collection and get all the messages that current users ID in the IDs field of messages. As we did in profile and hashtags we created a provider to hold the information about which message to show while navigating to the chat screen."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the chat screen, I created a widget to display individual message body. This widget displays the message near or far end of the screen with different colors depending on whether it is from the current user or not. For fetching messages we again use the paginate firestore package. This time we use the reversing future. When the user scrolls up, the old messages will load."}]},{"type":"element","tag":"h3","props":{"id":"search"},"children":[{"type":"text","value":"Search"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As for the final, we implemented the search screen. For search, I used a package called firestore search that handles querying. As we couldn't implement full text search, I decided to search only for users with usernames."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the package to work we need to add a method to the user model. This method will get a query snapshow from firestore and convert it to a user object."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Thanks to the listview builder, this object is used to dynamically display users in a list. When the tile is clicked, the user profile page will be displayed."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As a conclusion, I want to show some screenshots of the app. It's not pretty, but it works... Having said that, the only thing I didn't implement was the notification. As we progressed through this, it became quite obvious how to do this. We can create a notification collection for each user in the Firestore and display from there."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Sign in","src":"/blogImg/page4/ss1.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sign in"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Sign up","src":"/blogImg/page4/ss2.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sign up"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Timeline","src":"/blogImg/page4/ss3.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Timeline"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Drawer","src":"/blogImg/page4/ss4.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Drawer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Search","src":"/blogImg/page4/ss5.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Search"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Profile","src":"/blogImg/page4/ss6.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Profile"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Explore","src":"/blogImg/page4/ss7.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Explore"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Messages","src":"/blogImg/page4/ss8.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Messages"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Conversation","src":"/blogImg/page4/ss9.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Conversation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This journey was enjoyable for me. As a reader, I hope you enjoyed the story..."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here is the link to the "},{"type":"element","tag":"a","props":{"href":"https://github.com/umitkara/twitter_clone_flutter","rel":["nofollow"]},"children":[{"type":"text","value":"Github Repo"}]},{"type":"text","value":" if you want to check... Have a nice day."}]}]},"date":"2022-09-28T00:00:00.000Z","author":"mit Kara","slug":"mobile-app-development-with-flutter-part-3","image":{"src":"/blogImg/page4/cover.jpg","alt":"Mobile App Development with Flutter (Part 3)"},"head":{"meta":[{"name":"description","content":"Final part of the Dart and Flutter series. In this final part we are going to build our app."},{"name":"keywords","content":"flutter, dart, mobile app development, umit kara, umitkara, mit kara"},{"name":"author","content":"mit Kara"},{"name":"robots","content":"index, follow"},{"name":"og:url","content":"https://umitkara.github.io/blog/mobile-app-development-with-flutter-part-3"},{"name":"og:type","content":"website"},{"name":"og:title","content":"Mobile App Development with Flutter (Part 3)"},{"name":"og:description","content":"Final part of the Dart and Flutter series. In this final part we are going to build our app."},{"name":"og:image","content":"https://umitkara.github.io/blogImg/page4/cover.jpg"},{"name":"twitter:card","content":"summary_large_image"},{"name":"twitter:title","content":"Mobile App Development with Flutter (Part 3)"},{"name":"twitter:description","content":"Final part of the Dart and Flutter series. In this final part we are going to build our app."},{"name":"twitter:image","content":"https://umitkara.github.io/blogImg/page4/cover.jpg"}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"From the start of this series, we checked out the basics of Dart and Flutter; and made a plan about how we are intending to develop our Twitter clone app. Now it's time to get action and start programming."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First of all, I should say that this one month adventure was fun. I didn't learn any brand-new technical skills, but I did a lot of practice in mobile app development. Coming from web development, I can say that mobile development is easier than web development, thanks to lots of prebuilt content and services. But at the end of the day, they are all tools to build stuff and it was fun."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I learned some things about Firebase on the road and I changed parts of our plan accordingly. The things about Firebase are, firstly, the Firebase functions are paid, and secondly, the Firestore extensions are paid. Due to the Turkish Lira - US Dolar currency exchange rate, I don't want to subscribe to a paid service. So I cancel these futures. Instead, for demonstration, I implemented an example trending topics collection to display on our explore page. Rather than full-text search, I decided to search only for users by their usernames when looking at the search results. Other than these, for paginated Firestore queries, I used a package. However, I will also discuss how it is possible to do it by hand."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Additionally, I should mention that this is not a learning meterial but I tried to explain the code as much as I could. Also at the end, you could check out the Github repository of the project for full source code."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With the light of all this, let's start..."}]},{"type":"element","tag":"h2","props":{"id":"last-step-play-the-game"},"children":[{"type":"text","value":"Last Step: Play the Game"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First of all, we need to install the Flutter extension to Visual Studio Code, if you didn't already install. Thanks to this extension we can create Flutter projects. All we need to do is open VS Code's command pallet and type 'New Project'; choose the Flutter project option. VS Code will ask you where to store the project name and where to save the project. After these steps, it will automatically create a blank project with an example counter application. You can have a look at this app..."}]},{"type":"element","tag":"h3","props":{"id":"directory-structure"},"children":[{"type":"text","value":"Directory Structure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After project creation we need to create our directory layout. This step is critical because in order to efficiently code we need to find and reach files easily. There will be 3 main folders that I'll create: "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Models"}]},{"type":"text","value":", "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"routes"}]},{"type":"text","value":" and "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"widgets"}]},{"type":"text","value":". In the models folder, we will store our database models and providers. The Routes folder will hold the screens that we build. Finally, in the widgets folder we will store reuseable widgets that we'll use while building this app."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With these folders, I create a routes file("},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"routes.dart"}]},{"type":"text","value":") that will hold our routing mechanics next to the main("},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"main.dart"}]},{"type":"text","value":") file."}]},{"type":"element","tag":"h3","props":{"id":"routing"},"children":[{"type":"text","value":"Routing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the routes file, we create a "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"text","value":" class. There are some static strings in this class that store the names of routes. Additionally, it has a "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"generateRoute"}]},{"type":"text","value":" function that takes a "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"RouteSettings"}]},{"type":"text","value":" and provides the real route to the Material app. For now we will return container widgets, but when we create our screens we add them to here for routing."}]},{"type":"element","tag":"code","props":{"code":"class RouteGenerator {\r\n  static const String home = '/';\r\n  static const String login = '/singin';\r\n  static const String register = '/signup';\r\n\r\n  RouteGenerator._();\r\n\r\n  static Route<dynamic> generateRoute(RouteSettings settings) {\r\n    switch (settings.name) {\r\n      case home:\r\n        return FirebaseAuth.instance.currentUser == null\r\n            ? MaterialPageRoute(\r\n                builder: (_) => const SigninScreen(),\r\n              )\r\n            : MaterialPageRoute(\r\n                builder: (_) => const TimelineScreen(),\r\n              );\r\n      case login:\r\n        return MaterialPageRoute(builder: (_) => const SigninScreen());\r\n      case register:\r\n        return MaterialPageRoute(builder: (_) => const SignupScreen());\r\n      default:\r\n        return MaterialPageRoute(\r\n            builder: (_) => ErrorWidget('Route not found'));\r\n    }\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" home "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'/'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" login "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'/singin'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" register "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'/signup'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"._();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"static"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Route"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"generateRoute"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"RouteSettings"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" settings) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"switch"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (settings.name) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"case"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" home"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseAuth"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance.currentUser "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"MaterialPageRoute"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                builder"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (_) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"SigninScreen"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              )"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"MaterialPageRoute"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                builder"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (_) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TimelineScreen"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"case"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" login"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"MaterialPageRoute"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(builder"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (_) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"SigninScreen"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"case"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" register"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"MaterialPageRoute"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(builder"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (_) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"SignupScreen"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"default:"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"MaterialPageRoute"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            builder"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (_) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"ErrorWidget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'Route not found'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order for routing to work, we need to add it to our Material app that is in our main file. We import it, than using it's static methods we set the 'initialRoute' parameter of material app to "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"text","value":"'s home. After we set the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"onGenerateRoute"}]},{"type":"text","value":" parameter to the RouteGenerator's "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"generateRoute"}]},{"type":"text","value":" function. With this way we can navigate through our app thanks to static strings."}]},{"type":"element","tag":"code","props":{"code":"class MyApp extends StatelessWidget {\r\n  const MyApp({Key? key}) : super(key: key);\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'Twitter Clone',\r\n      theme: ThemeData(\r\n        primarySwatch: Colors.blue,\r\n      ),\r\n      initialRoute: RouteGenerator.home,\r\n      onGenerateRoute: RouteGenerator.generateRoute,\r\n      debugShowCheckedModeBanner: false, // This removes debug banner\r\n    );\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"MyApp"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"StatelessWidget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"MyApp"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Key"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" key}) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"super"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(key"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" key);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"@override"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Widget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"BuildContext"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" context) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"MaterialApp"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      title"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'Twitter Clone'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      theme"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"ThemeData"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        primarySwatch"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Colors"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".blue,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      initialRoute"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".home,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      onGenerateRoute"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".generateRoute,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      debugShowCheckedModeBanner"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-a9f854"},"children":[{"type":"text","value":"// This removes debug banner"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"firebase"},"children":[{"type":"text","value":"Firebase"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One of the most crucial things that we have to do is set up our app as a Firebase app. For this we need to add some packages to our app: "},{"type":"element","tag":"a","props":{"href":"https://pub.dev/packages/firebase_core","rel":["nofollow"]},"children":[{"type":"text","value":"Firebase Core"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://pub.dev/packages/firebase_auth","rel":["nofollow"]},"children":[{"type":"text","value":"Firebase Auth"}]},{"type":"text","value":", "},{"type":"element","tag":"a","props":{"href":"https://pub.dev/packages/cloud_firestore","rel":["nofollow"]},"children":[{"type":"text","value":"Cloud Firestore"}]},{"type":"text","value":". Also we need to activate the Firebase command line tool for Dart with this command: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"dart pub global activate flutterfire_cli"}]},{"type":"text","value":" ("},{"type":"element","tag":"a","props":{"href":"https://firebase.flutter.dev/docs/overview/","rel":["nofollow"]},"children":[{"type":"text","value":"Check out for help"}]},{"type":"text","value":"). After this step, we can use "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"flutterfire(firebase dart CLI)"}]},{"type":"text","value":" to configure our app. All we have to do is input this command into our project folder: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"flutterfire configure"}]},{"type":"text","value":". It will ask you whether you want to choose an existing project or make a new one. You can create a brand-new project following the steps. Then, CLI will ask you about which platforms should be configured for the Firebase projects. After a short wait, everything will be set up."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to use Firebase in our app, we should initialize it last. In main.dart, import the Firebase Core package, and Firebase options file that Flutterfire generated. After add this code sniplet before the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"runApp"}]},{"type":"text","value":" statement:"}]},{"type":"element","tag":"code","props":{"code":"WidgetsFlutterBinding.ensureInitialized();\r\nawait Firebase.initializeApp(\r\n    options: DefaultFirebaseOptions.currentPlatform,\r\n);\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"WidgetsFlutterBinding"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"ensureInitialized"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Firebase"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"initializeApp"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    options"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"DefaultFirebaseOptions"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".currentPlatform,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"With this done, we can import sub-service packages to our files and use Firebase services."}]},{"type":"element","tag":"h3","props":{"id":"riverpod-state-management"},"children":[{"type":"text","value":"Riverpod: State Management"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As we are developing through our app, we need to share information between screens. Riverpod was selected as our state management package for this purpose. In order for Riverpod to work we need to initialize it too. We do this by changing the runApp statement to this statement:"}]},{"type":"element","tag":"code","props":{"code":"runApp(\r\n  const ProviderScope(\r\n    child: MyApp(),\r\n  ),\r\n);\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"runApp"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"ProviderScope"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    child"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"MyApp"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"authentication"},"children":[{"type":"text","value":"Authentication"}]},{"type":"element","tag":"h4","props":{"id":"sign-in-page"},"children":[{"type":"text","value":"Sign In Page"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here we are at the point that we really start the project. For sign in, we need to create a sign in page first. This page displays the scaffold with app bar. As its body we will create a stateful Sign in form widget. We created this page in the routes folder. Also we need to add it to the routes.dart file in order to navigate."}]},{"type":"element","tag":"code","props":{"code":"class SigninScreen extends StatelessWidget {\r\n  const SigninScreen({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: const Text('Sign in'),\r\n      ),\r\n      body: const SigninForm(),\r\n    );\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"SigninScreen"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"StatelessWidget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"SigninScreen"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"super"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".key});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"@override"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Widget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"BuildContext"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" context) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Scaffold"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      appBar"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"AppBar"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        title"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Text"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'Sign in'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      body"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"SigninForm"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the sign in widget, we need to create a form. With the form widget, we can easily validate data. In the form there are 2 text fields for email address and password, a button for sign in and a button to redirect user to sign up. We need to define a controller for each text field in order to get the text entered there afterwards."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The implementation of the sign up button is easy. All we need to do is push the sign up page to the navigator. We will create it next."}]},{"type":"element","tag":"code","props":{"code":"Navigator.of(context).pushReplacementNamed(RouteGenerator.register);\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(context)."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"pushReplacementNamed"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".register);"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the sign in button, first we need to validate the inputs. Then, using Firebase Auth, we try to sign the user in. Afterwards, if no error occurs, we push the homepage route to the navigator."}]},{"type":"element","tag":"code","props":{"code":"ElevatedButton(\r\n    onPressed: () async {\r\n        if (_formKey.currentState?.validate() ?? false) {\r\n        try {\r\n            await FirebaseAuth.instance.signInWithEmailAndPassword(\r\n                email: _emailController.text,\r\n                password: _passwordController.text,\r\n            );\r\n            if (!mounted) return;\r\n            Navigator.of(context)\r\n                .pushReplacementNamed(RouteGenerator.home);\r\n        } on FirebaseAuthException catch (e) {\r\n            ScaffoldMessenger.of(context).showSnackBar(\r\n            SnackBar(\r\n                content: Text(e.message ?? 'Error'),\r\n            ),\r\n            );\r\n        }\r\n        }\r\n    },\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"ElevatedButton"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    onPressed"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (_formKey.currentState"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"validate"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseAuth"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"signInWithEmailAndPassword"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                email"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" _emailController.text,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                password"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" _passwordController.text,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"mounted) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(context)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"pushReplacementNamed"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".home);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        } "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseAuthException"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (e) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"ScaffoldMessenger"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(context)."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"showSnackBar"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"SnackBar"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                content"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Text"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(e.message "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'Error'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    },"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"sign-up-page"},"children":[{"type":"text","value":"Sign Up Page"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As like as the sign in page we also create a sign up screen and use the same structure. Then we create a signup steps widget in the widgets folder. As I mentioned in the previous post we will use the stepper widget here."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There will be 2 forms in this widget, 2 steps. Firstly, we obtain the credentials from the user, and then we get the information. For each form we need to define controllers and for each text field we need to define controllers and focus nodes. Focus nodes are used to change the focus of the input when the user is done. We use it to switch between text fields. Don't forget to dispose of controllers and focus nodes, otherwise memory leaks may occur."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the steper widget we need to define an index. When the first form is valid the user could continue to fill the second form in this way. After validation of the first form, we will increase the index. We will use conditions to cancel the dynamic. If the index is 0, this means that we are in the first step; and if we cancel it we should go back to sig in screen. But if the index is 1 we should decrease it and return back to the first step."}]},{"type":"element","tag":"code","props":{"code":"Future<void> form1Submit(UserRegister userRegisterer,\r\n    Map<String, String> userRegistererState) async {\r\n  emailExists =\r\n      await userRegisterer.checkEmailExists(emailController.text.trim());\r\n  usernameExists = await userRegisterer\r\n      .checkUsernameExists(usernameController.text.trim());\r\n  if (step1FormKey.currentState!.validate()) {\r\n    isForm1Valid = true;\r\n    userRegistererState['email'] = emailController.text;\r\n    userRegistererState['password'] = passwordController.text;\r\n    userRegistererState['username'] = usernameController.text;\r\n    setState(() {\r\n      _index++;\r\n      nameFocusNode.requestFocus();\r\n    });\r\n  }\r\n}\r\n\r\nFuture<void> form2Submit(Map<String, String> userRegistererState,\r\n    UserRegister userRegisterer, BuildContext context) async {\r\n  if (step2FormKey.currentState!.validate()) {\r\n    isForm2Valid = true;\r\n    userRegistererState['name'] = nameController.text;\r\n    userRegistererState['bio'] = bioController.text;\r\n    userRegistererState['location'] = locationController.text;\r\n    userRegistererState['website'] = websiteController.text;\r\n    if (await userRegisterer.tryRegister()) {\r\n      Navigator.of(context).pushReplacementNamed(RouteGenerator.home);\r\n    }\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"form1Submit"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"UserRegister"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userRegisterer,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> userRegistererState) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  emailExists "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userRegisterer."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"checkEmailExists"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(emailController.text."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"trim"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  usernameExists "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userRegisterer"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"checkUsernameExists"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(usernameController.text."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"trim"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (step1FormKey.currentState"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"validate"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    isForm1Valid "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    userRegistererState["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'email'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" emailController.text;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    userRegistererState["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'password'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" passwordController.text;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    userRegistererState["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'username'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" usernameController.text;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"setState"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      _index"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      nameFocusNode."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"requestFocus"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"form2Submit"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> userRegistererState,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"UserRegister"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userRegisterer, "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"BuildContext"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" context) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (step2FormKey.currentState"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"validate"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    isForm2Valid "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    userRegistererState["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" nameController.text;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    userRegistererState["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'bio'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" bioController.text;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    userRegistererState["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'location'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" locationController.text;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    userRegistererState["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'website'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" websiteController.text;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userRegisterer."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"tryRegister"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(context)."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"pushReplacementNamed"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".home);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The validation of forms works the same way as we did in the sign in form. After the second form is filled and verified, we try to sign up the user. For this we need to create some providers and a user model."}]},{"type":"element","tag":"h4","props":{"id":"user-model"},"children":[{"type":"text","value":"User Model"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"First, let's start with the user model class. This class will hold the user's information that we gather from the database."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We create a user file in the models and create a user class in it. We provide all the fields that I mentioned in the previous post as well as the ID field in addition. For some relational purposes we use the ID field, so it needs to be here. After that, we create a null-safe constructor for it, so even if we don't gather all the fields, we won't get any errors. As a final step we need to write from and to JSON functions. With these functions we could create new users and convert the Firestore data to a user object."}]},{"type":"element","tag":"code","props":{"code":"class User {\r\n  String? bio;\r\n  DateTime? createdAt;\r\n  List<dynamic>? followings;\r\n  List<dynamic>? followers;\r\n  List<dynamic>? tweets;\r\n  String? id;\r\n  String? link;\r\n  String? location;\r\n  String? name;\r\n  String? username;\r\n\r\n  User({\r\n    this.bio,\r\n    this.createdAt,\r\n    this.followings,\r\n    this.followers,\r\n    this.id,\r\n    this.link,\r\n    this.location,\r\n    this.name,\r\n    this.username,\r\n    this.tweets,\r\n  });\r\n\r\n  factory User.fromJson(Map<String, dynamic> json) {\r\n    return User(\r\n      bio: json['bio'] as String?,\r\n      createdAt: (json['createdAt'] as Timestamp).toDate(),\r\n      followings: json['followings'] as List<dynamic>?,\r\n      followers: json['followers'] as List<dynamic>?,\r\n      id: json['id'] as String,\r\n      link: json['link'] as String?,\r\n      location: json['location'] as String?,\r\n      name: json['name'] as String,\r\n      username: json['username'] as String,\r\n      tweets: json['tweets'] as List<dynamic>?,\r\n    );\r\n  }\r\n\r\n  Map<String, dynamic> toJson() {\r\n    return {\r\n      'bio': bio,\r\n      'createdAt': createdAt,\r\n      'followings': followings,\r\n      'followers': followers,\r\n      'id': id,\r\n      'link': link,\r\n      'location': location,\r\n      'name': name,\r\n      'username': username,\r\n      'tweets': tweets,\r\n    };\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" bio;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"DateTime"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" createdAt;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" followings;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" followers;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweets;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" id;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" link;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" location;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" name;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" username;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".bio,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".createdAt,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".followings,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".followers,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".id,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".link,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".location,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".name,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".username,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".tweets,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"factory"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"fromJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> json) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      bio"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'bio'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      createdAt"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'createdAt'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Timestamp"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"toDate"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      followings"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'followings'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      followers"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'followers'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      id"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'id'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      link"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'link'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      location"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'location'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      name"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      username"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'username'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      tweets"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"toJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'bio'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" bio,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'createdAt'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" createdAt,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'followings'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" followings,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'followers'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" followers,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'id'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" id,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'link'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" link,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'location'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" location,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" name,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'username'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" username,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweets,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"user-providers"},"children":[{"type":"text","value":"User Providers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this step we will create some providers for serving user's information through our app. First provider I want to implement is a stream provider that serves user's stream from Firebase Auth service. Another one is also a stream provider that provides the current user's profile information. This stream will return the user object that we created previously. Other than that, there is a future provider that will serve the current user's followings. Instead, we could use the profile provider, but I thought this would lead to cleaner code. And finally we create a state notifier provider. This provider is used for user registration. With this provider we serve the class UserRegister that we are about to create. With this class we hold information between steps of sign up widget and attempting to register the user."}]},{"type":"element","tag":"code","props":{"code":"final userStreamProvider = StreamProvider<User?>((ref) {\r\n  return FirebaseAuth.instance.authStateChanges();\r\n});\r\n\r\nfinal userProfileProvider = StreamProvider.autoDispose<User?>((ref) {\r\n  final userStream = ref.watch(userStreamProvider);\r\n  final user = userStream.asData?.value;\r\n  if (user == null) {\r\n    return const Stream.empty();\r\n  }\r\n  return FirebaseFirestore.instance\r\n      .collection('users')\r\n      .doc(user.uid)\r\n      .snapshots()\r\n      .map((snapshot) => User.fromJson(snapshot.data()!));\r\n});\r\n\r\nfinal userFollowingsProvider = FutureProvider((ref) async {\r\n  final userStream = ref.watch(userStreamProvider);\r\n  final user = userStream.asData?.value;\r\n  if (user == null) {\r\n    return const Stream.empty();\r\n  }\r\n  final userDoc =\r\n      await FirebaseFirestore.instance.collection('users').doc(user.uid).get();\r\n\r\n  final userFollowings = userDoc.data()!['followings'] as List<dynamic>;\r\n\r\n  return userFollowings;\r\n});\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userStreamProvider "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"StreamProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"?>((ref) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseAuth"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"authStateChanges"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userProfileProvider "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"StreamProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"autoDispose"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"?>((ref) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userStream "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" ref."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userStreamProvider);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" user "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userStream.asData"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".value;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (user "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Stream"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"empty"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'users'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(user.uid)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"snapshots"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"((snapshot) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"fromJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(snapshot."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userFollowingsProvider "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FutureProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"((ref) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userStream "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" ref."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userStreamProvider);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" user "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userStream.asData"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".value;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (user "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Stream"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"empty"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userDoc "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'users'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(user.uid)."}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userFollowings "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userDoc."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'followings'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userFollowings;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The class extends the StateNotifier class. As a constructor, we will create an emty map. We store all the information on this map. In this class, there are two functions to check if the entered email address or username already exists. We do this by using a firestore collection for each. And finally we have the tryRegister function that tried to register the user. Via the map we defined, first we create an account with Firebase Auth. Then using the id that firebase gave to user, we create a document and store all the profile information of user in it. Finally, we add the username and email to our database for further user registration checks."}]},{"type":"element","tag":"code","props":{"code":"final userRegisterProvider =\r\n    StateNotifierProvider<UserRegister, Map<String, String>>(\r\n  (ref) => UserRegister(),\r\n);\r\n\r\nclass UserRegister extends StateNotifier<Map<String, String>> {\r\n  UserRegister() : super({});\r\n\r\n  Future<bool> checkUsernameExists(String username) async {\r\n    final usernames = await FirebaseFirestore.instance\r\n        .collection('credentials')\r\n        .doc('usernames')\r\n        .get();\r\n\r\n    return (usernames.data()!['usernames'] as List<dynamic>).contains(username);\r\n  }\r\n\r\n  Future<bool> checkEmailExists(String email) async {\r\n    final emails = await FirebaseFirestore.instance\r\n        .collection('credentials')\r\n        .doc('emails')\r\n        .get();\r\n\r\n    return (emails.data()!['emails'] as List<dynamic>).contains(email);\r\n  }\r\n\r\n  Future<bool> tryRegister() async {\r\n    if (state['username'] == null) {\r\n      return Future.value(false);\r\n    }\r\n    if (state['email'] == null) {\r\n      return Future.value(false);\r\n    }\r\n    if (state['password'] == null) {\r\n      return Future.value(false);\r\n    }\r\n    if (state['name'] == null) {\r\n      return Future.value(false);\r\n    }\r\n    final UserCredential newUser;\r\n    // Register user via Firebase Auth\r\n    try {\r\n      newUser = await FirebaseAuth.instance.createUserWithEmailAndPassword(\r\n        email: state['email']!,\r\n        password: state['password']!,\r\n      );\r\n    } catch (e) {\r\n      return Future.value(false);\r\n    }\r\n    FirebaseFirestore.instance\r\n      // Save user info to Firestore\r\n      ..collection('users').doc(newUser.user!.uid).set({\r\n        'id': newUser.user!.uid,\r\n        'name': state['name'],\r\n        'username': state['username'],\r\n        'email': state['email'],\r\n        'bio': state['bio'] ?? '',\r\n        'location': state['location'] ?? '',\r\n        'website': state['website'] ?? '',\r\n        'createdAt': DateTime.now(),\r\n        'followers': [newUser.user!.uid],\r\n        'followings': [],\r\n        'likes': [],\r\n        'tweets': [],\r\n      })\r\n      // Add username to username list\r\n      ..collection('credentials').doc('usernames').update({\r\n        'usernames': FieldValue.arrayUnion([state['username']]),\r\n      })\r\n      // Add email to email list\r\n      ..collection('credentials').doc('emails').update({\r\n        'emails': FieldValue.arrayUnion([state['email']]),\r\n      });\r\n    return Future.value(true);\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userRegisterProvider "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"StateNotifierProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"UserRegister"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">>("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  (ref) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"UserRegister"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"UserRegister"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"StateNotifier"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">> {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"UserRegister"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"super"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"checkUsernameExists"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" username) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" usernames "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'credentials'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'usernames'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (usernames."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'usernames'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">)."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"contains"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(username);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"checkEmailExists"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" email) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" emails "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'credentials'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'emails'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (emails."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'emails'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">)."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"contains"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(email);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"bool"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"tryRegister"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'username'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'email'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'password'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"UserCredential"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" newUser;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-a9f854"},"children":[{"type":"text","value":"// Register user via Firebase Auth"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      newUser "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseAuth"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"createUserWithEmailAndPassword"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        email"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'email'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"]"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        password"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'password'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"]"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (e) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-a9f854"},"children":[{"type":"text","value":"// Save user info to Firestore"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      .."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'users'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(newUser.user"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".uid)."}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'id'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" newUser.user"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".uid,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'name'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'username'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'username'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'email'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'email'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'bio'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'bio'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'location'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'location'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'website'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'website'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'createdAt'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"DateTime"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"now"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'followers'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [newUser.user"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".uid],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'followings'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'likes'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-a9f854"},"children":[{"type":"text","value":"// Add username to username list"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      .."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'credentials'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'usernames'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'usernames'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FieldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"arrayUnion"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'username'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"]]),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-a9f854"},"children":[{"type":"text","value":"// Add email to email list"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      .."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'credentials'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'emails'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'emails'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FieldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"arrayUnion"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([state["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'email'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"]]),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once we have defined all the necessary things, we will use them to authenticate the user and show the timeline, our homepage."}]},{"type":"element","tag":"h3","props":{"id":"timeline"},"children":[{"type":"text","value":"Timeline"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As I mentioned, the timeline page is meant to be our homepage. In this page we display all the tweets, retweets and replies that user and user's followings have."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As we did in authentication screens we create a timeline screen in the routes folder and add it to our route generator. The page has a scaffold widget that holds the app bar, navigation drawer we are about to create, body and the floating action button to post a new tweet."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the app bar's title, I'm intending to insert a const text widget that writes timeline to the top, and add an action to open the search page. During the planning phase, I thought of creating a separate search page, but it became more logical to create a drawer instead. We use an icon button with a search icon for action lists."}]},{"type":"element","tag":"code","props":{"code":"class TimelineScreen extends StatelessWidget {\r\n  const TimelineScreen({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n        appBar: AppBar(\r\n          title: const Text('Timeline'),\r\n          actions: [\r\n            IconButton(\r\n              onPressed: () {\r\n                Navigator.of(context).pushNamed(RouteGenerator.search);\r\n              },\r\n              icon: const Icon(Icons.search),\r\n            )\r\n          ],\r\n        ),\r\n        drawer: NavigationDrawerWidget(pageContext: context),\r\n        body: const TweetListview(),\r\n        floatingActionButton: FloatingActionButton(\r\n          onPressed: () {\r\n            Navigator.pushNamed(context, RouteGenerator.newTweet);\r\n          },\r\n          child: const Icon(Icons.add),\r\n        ));\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TimelineScreen"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"StatelessWidget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TimelineScreen"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"super"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".key});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"@override"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Widget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"BuildContext"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" context) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Scaffold"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        appBar"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"AppBar"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          title"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Text"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'Timeline'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          actions"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"IconButton"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              onPressed"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(context)."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"pushNamed"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".search);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              icon"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Icon"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Icons"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".search),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            )"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          ],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        drawer"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"NavigationDrawerWidget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(pageContext"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" context),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        body"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TweetListview"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        floatingActionButton"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FloatingActionButton"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          onPressed"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"pushNamed"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(context, "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".newTweet);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          child"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Icon"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Icons"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".add),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ));"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"navigation-drawer"},"children":[{"type":"text","value":"Navigation Drawer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The navigation drawer has two purposes. Firstly, it displays current user stats, and secondly, it shows routes. For this widget we create a navigation drawer widget file in our widgets folder. This widget doesn't require any state, so we define it as stateless."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I'm planning to use the profile screen to display every profile, not just the profile of current users. Because of this, I will create a new provider to hold which users to show on the profile pages. When we click the profile button in this drawer, this provider will hold the current user's ID for us. Later in the profile page we'll use this information."}]},{"type":"element","tag":"code","props":{"code":"final whichProfileToShowProvider = StateProvider<String>(\r\n  (ref) => '',\r\n);\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" whichProfileToShowProvider "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"StateProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  (ref) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For user's stats, we'll use a drawer header widget with a column as a child. In that column we show a dummy profile image, user's name, bio, following and follower stats. We fetch these information from the provider that we defined in the previous part."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For navigation buttons, we'll use List tiles with dedicated icons as leading. Because we create static strings for route names, we can easily navigate using those."}]},{"type":"element","tag":"code","props":{"code":"ListTile(\r\n  leading: const Icon(Icons.home),\r\n  title: const Text('Home'),\r\n  onTap: () {\r\n    Navigator.pushReplacementNamed(pageContext, RouteGenerator.home);\r\n  },\r\n),\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"ListTile"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  leading"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Icon"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Icons"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".home),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  title"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Text"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'Home'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  onTap"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"pushReplacementNamed"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(pageContext, "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"RouteGenerator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".home);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"),"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"tweet-model"},"children":[{"type":"text","value":"Tweet Model"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Before creating the body, we need to build the tweet model. As we did in the user model, we declare all the fields that we used in firestore. In addition, we include the tweet's ID. We create a constructor that initializes all the fields and implement from and to JSON methods. In the from JSON method, we focus on the original tweet field. When we are fetching a tweet, if it has an original tweet, we need to fetch it as well."}]},{"type":"element","tag":"code","props":{"code":"class Tweet {\r\n  String? id;\r\n  String? body;\r\n  DateTime? createdAt;\r\n  List<dynamic>? likes;\r\n  List<dynamic>? media;\r\n  dynamic originalTweet;\r\n  List<dynamic>? replies;\r\n  List<dynamic>? retweets;\r\n  TweetType? type;\r\n  Future<User>? user;\r\n  String? userId;\r\n  List<dynamic>? hashtags;\r\n  List<dynamic>? mentions;\r\n\r\n  Tweet({\r\n    this.id,\r\n    this.body,\r\n    this.createdAt,\r\n    this.likes,\r\n    this.media,\r\n    this.originalTweet,\r\n    this.replies,\r\n    this.retweets,\r\n    this.type,\r\n    this.user,\r\n    this.userId,\r\n    this.hashtags,\r\n    this.mentions,\r\n  });\r\n\r\n  factory Tweet.fromJson(Map<String, dynamic> json, String? id) {\r\n    final Future<Tweet>? orgTweet;\r\n    if (json['originalTweet'] == null) {\r\n      orgTweet = null;\r\n    } else {\r\n      orgTweet = (json['originalTweet'] as DocumentReference).get().then(\r\n          (value) =>\r\n              Tweet.fromJson(value.data()! as Map<String, dynamic>, value.id));\r\n    }\r\n    return Tweet(\r\n      id: id,\r\n      body: json['body'] as String?,\r\n      createdAt: (json['createdAt'] as Timestamp).toDate(),\r\n      likes: json['likes'] as List<dynamic>?,\r\n      media: json['media'] as List<dynamic>?,\r\n      originalTweet: orgTweet,\r\n      replies: json['replies'] as List<dynamic>?,\r\n      retweets: json['retweets'] as List<dynamic>?,\r\n      type: _getTypeFromString(json['type']),\r\n      user: (json['user'] as DocumentReference).get().then(\r\n          (value) => User.fromJson(value.data()! as Map<String, dynamic>)),\r\n      userId: json['userId'] as String?,\r\n      hashtags: json['hashtags'] as List<dynamic>?,\r\n      mentions: json['mentions'] as List<dynamic>?,\r\n    );\r\n  }\r\n\r\n  Map<String, dynamic> toJson() {\r\n    final userDoc = FirebaseFirestore.instance.collection('users').doc(userId);\r\n    return {\r\n      'id': id,\r\n      'body': body,\r\n      'createdAt': createdAt,\r\n      'likes': likes ?? [],\r\n      'originalTweet': originalTweet,\r\n      'replies': replies ?? [],\r\n      'retweets': retweets ?? [],\r\n      'type': type?.name,\r\n      'user': userDoc,\r\n      'userId': userId,\r\n      'hashtags': hashtags ?? [],\r\n      'mentions': mentions ?? [],\r\n    };\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" id;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" body;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"DateTime"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" createdAt;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" likes;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" media;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" originalTweet;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" replies;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" retweets;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TweetType"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" type;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" user;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userId;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" hashtags;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" mentions;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".id,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".body,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".createdAt,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".likes,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".media,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".originalTweet,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".replies,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".retweets,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".type,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".user,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".userId,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".hashtags,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".mentions,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"factory"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"fromJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> json, "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" id) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" orgTweet;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'originalTweet'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      orgTweet "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      orgTweet "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'originalTweet'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"DocumentReference"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          (value) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"fromJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(value."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">, value.id));"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      id"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" id,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      body"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'body'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      createdAt"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'createdAt'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Timestamp"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"toDate"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      likes"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'likes'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      media"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'media'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      originalTweet"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" orgTweet,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      replies"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'replies'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      retweets"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'retweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      type"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"_getTypeFromString"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'type'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"]),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      user"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'user'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"DocumentReference"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          (value) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"fromJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(value."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">)),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      userId"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'userId'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      hashtags"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'hashtags'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      mentions"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" json["}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'mentions'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"toJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userDoc "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'users'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'id'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" id,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'body'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" body,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'createdAt'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" createdAt,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'likes'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" likes "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'originalTweet'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" originalTweet,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'replies'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" replies "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'retweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" retweets "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'type'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" type"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".name,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'user'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userDoc,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'userId'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userId,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'hashtags'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" hashtags "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'mentions'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" mentions "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Other than these methods, we need to create methods to like and dislike the tweet, retweet and unretweet the tweet and reply to the tweet."}]},{"type":"element","tag":"code","props":{"code":"void _like(String? userId) {\r\n  likes!.add(userId);\r\n  FirebaseFirestore.instance.collection('tweets').doc(id).update({\r\n    'likes': FieldValue.arrayUnion([userId])\r\n  });\r\n  final currentUser = auth.FirebaseAuth.instance.currentUser;\r\n  if (currentUser != null) {\r\n    FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(currentUser.uid)\r\n        .update({\r\n      'likes': FieldValue.arrayUnion([id])\r\n    });\r\n  }\r\n}\r\n\r\nvoid _dislike(String? userId) {\r\n  likes!.remove(userId);\r\n  FirebaseFirestore.instance\r\n      .collection('tweets')\r\n      .doc(id)\r\n      .update({'likes': likes});\r\n  final currentUser = auth.FirebaseAuth.instance.currentUser;\r\n  if (currentUser != null) {\r\n    FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(currentUser.uid)\r\n        .update({\r\n      'likes': FieldValue.arrayRemove([id])\r\n    });\r\n  }\r\n}\r\n\r\nvoid likeDislike(String? userId) {\r\n  if (likes!.contains(userId)) {\r\n    _dislike(userId);\r\n  } else {\r\n    _like(userId);\r\n  }\r\n}\r\n\r\nvoid _retweet(String? userId) async {\r\n  retweets!.add(userId);\r\n  final tweetDoc = FirebaseFirestore.instance.collection('tweets').doc(id);\r\n  tweetDoc.update({\r\n    'retweets': FieldValue.arrayUnion([userId])\r\n  });\r\n  final newRetweet = Tweet(\r\n    body: \"\",\r\n    type: TweetType.retweet,\r\n    userId: userId,\r\n    createdAt: DateTime.now(),\r\n    originalTweet: tweetDoc,\r\n  );\r\n  final newRetweetDoc = await FirebaseFirestore.instance\r\n      .collection('tweets')\r\n      .add(newRetweet.toJson());\r\n  newRetweetDoc.update({\r\n    'id': newRetweetDoc.id,\r\n  });\r\n  final currentUser = auth.FirebaseAuth.instance.currentUser;\r\n  if (currentUser != null) {\r\n    FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(currentUser.uid)\r\n        .update({\r\n      'tweets': FieldValue.arrayUnion([newRetweetDoc.id])\r\n    });\r\n  }\r\n}\r\n\r\nvoid _unretweet(String? userId) async {\r\n  retweets!.remove(userId);\r\n  final tweetDoc = FirebaseFirestore.instance.collection('tweets').doc(id);\r\n  tweetDoc.update({\r\n    'retweets': FieldValue.arrayRemove([userId])\r\n  });\r\n  final currentUser =\r\n      FirebaseFirestore.instance.collection('users').doc(userId);\r\n  final retweetDoc = await FirebaseFirestore.instance\r\n      .collection('tweets')\r\n      .where('originalTweet', isEqualTo: tweetDoc)\r\n      .where('userId', isEqualTo: currentUser.id)\r\n      .get();\r\n  retweetDoc.docs.first.reference.delete();\r\n  currentUser.update({\r\n    'tweets': FieldValue.arrayRemove([retweetDoc.docs.first.id])\r\n  });\r\n}\r\n\r\nvoid retweetUnretweet(String? userId) {\r\n  if (retweets!.contains(userId)) {\r\n    _unretweet(userId);\r\n  } else {\r\n    _retweet(userId);\r\n  }\r\n}\r\n\r\nvoid reply(String? userId) {\r\n  replies!.add(userId);\r\n  FirebaseFirestore.instance.collection('tweets').doc(id).update({\r\n    'replies': FieldValue.arrayUnion([userId])\r\n  });\r\n  final currentUser = auth.FirebaseAuth.instance.currentUser;\r\n  if (currentUser != null) {\r\n    FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(currentUser.uid)\r\n        .update({\r\n      'replies': FieldValue.arrayUnion([id])\r\n    });\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"_like"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userId) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  likes"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(id)."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'likes'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FieldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"arrayUnion"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([userId])"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" currentUser "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" auth."}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseAuth"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance.currentUser;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (currentUser "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'users'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(currentUser.uid)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'likes'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FieldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"arrayUnion"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([id])"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"_dislike"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userId) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  likes"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"remove"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(id)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'likes'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" likes});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" currentUser "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" auth."}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseAuth"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance.currentUser;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (currentUser "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'users'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(currentUser.uid)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'likes'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FieldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"arrayRemove"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([id])"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"likeDislike"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userId) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (likes"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"contains"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId)) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"_dislike"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"_like"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"_retweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userId) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  retweets"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweetDoc "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(id);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  tweetDoc."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'retweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FieldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"arrayUnion"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([userId])"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" newRetweet "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    body"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    type"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TweetType"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".retweet,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    userId"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userId,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    createdAt"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"DateTime"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"now"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    originalTweet"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweetDoc,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" newRetweetDoc "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(newRetweet."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"toJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  newRetweetDoc."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'id'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" newRetweetDoc.id,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" currentUser "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" auth."}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseAuth"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance.currentUser;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (currentUser "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'users'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(currentUser.uid)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FieldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"arrayUnion"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([newRetweetDoc.id])"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"_unretweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userId) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  retweets"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"remove"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweetDoc "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(id);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  tweetDoc."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'retweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FieldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"arrayRemove"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([userId])"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" currentUser "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'users'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" retweetDoc "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"where"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'originalTweet'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", isEqualTo"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweetDoc)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"where"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'userId'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", isEqualTo"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" currentUser.id)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  retweetDoc.docs.first.reference."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  currentUser."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FieldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"arrayRemove"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([retweetDoc.docs.first.id])"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"retweetUnretweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userId) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (retweets"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"contains"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId)) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"_unretweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"_retweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"reply"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userId) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  replies"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userId);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(id)."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'replies'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FieldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"arrayUnion"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([userId])"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" currentUser "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" auth."}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseAuth"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance.currentUser;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (currentUser "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'users'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(currentUser.uid)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'replies'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FieldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"arrayUnion"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([id])"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"body-the-timeline-widget"},"children":[{"type":"text","value":"Body: The Timeline widget"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After the drawer, the one critical missing part is the body of the screen. For body we'll create a tweet listview widget in our widgets directory. Again this widget is a stateless widget."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"While planning, I mentioned that I wanted to paginate the timeline stream. For pagination, I used a package called Paginate Firestore. This package handles all the pagination related stuff, so we don't need to write extra code for it. I will, however, show you my idea of how it could be done without it."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For this, I added a new provider in our providers file called timeline provider. This provider will be a StateNotifierProvider, and keep track of a timeline class that we are about to implement and return a list of tweets. The timeline class will extend the StateNotifier class. During the creation of the class, we create an empty list and call the init method. We create a separate init class because we will do some asynchronous work in it that we can't do in the class constructor."}]},{"type":"element","tag":"code","props":{"code":"final timelineProvider = StateNotifierProvider<Timeline, List<Tweet>>((ref) {\r\n  return Timeline();\r\n});\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" timelineProvider "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"StateNotifierProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Timeline"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">>((ref) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Timeline"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the init method. We get the current user from Firebase Auth. Next, we get the following information from Firestore about the user. Finally, we query Firestore. We query the tweets collection where the creator of the tweet's id is in the user's followings list. We order it by creation time and limit it by number. Finally we need to map each returned value from this query. In this way we create a list of tweet objects with the given limit."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Via this initialization we get the latest tweets of user's followings; but we want to fetch more tweets. For this we create a new method, load more. For loading more we need to know the last document that Firestore returned. To solve this we create a class variable called last document and in the init method we initialize it to the last document that query returned. There is only one thing we are going to add to this method, which is start after document query selector. We reinitialize the last document after querying. We convert them to tweets and add them all to the list. To use this future in a listview widget in the timeline widget, we need to use a scroll indicator widget. With the scroll indicator, we could know that the user is at the bottom of the page and run the load more function to fetch tweets."}]},{"type":"element","tag":"code","props":{"code":"class Timeline extends StateNotifier<List<Tweet>> {\r\n  DocumentSnapshot? lastDocument;\r\n  User? user;\r\n  User? userProfile;\r\n\r\n  Timeline({this.lastDocument}) : super([]) {\r\n    init();\r\n  }\r\n\r\n  void init() async {\r\n    user = FirebaseAuth.instance.currentUser!;\r\n\r\n    userProfile = await FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(user?.uid)\r\n        .get()\r\n        .then((value) => User.fromJson(value.data()!));\r\n\r\n    state = await FirebaseFirestore.instance\r\n        .collection('tweets')\r\n        .where('userId', whereIn: userProfile?.followings)\r\n        .orderBy('createdAt', descending: true)\r\n        .limit(5)\r\n        .get()\r\n        .then((value) {\r\n      lastDocument = value.docs.last;\r\n      return value.docs\r\n          .map((doc) => Tweet.fromJson(doc.data(), doc.id))\r\n          .toList();\r\n    });\r\n  }\r\n\r\n  void loadMore() async {\r\n    try {\r\n      final newTweets = await FirebaseFirestore.instance\r\n          .collection('tweets')\r\n          .where('userId', whereIn: userProfile?.followings)\r\n          .orderBy('createdAt', descending: true)\r\n          .startAfterDocument(lastDocument!)\r\n          .limit(5)\r\n          .get()\r\n          .then((value) {\r\n        lastDocument = value.docs[value.size - 1];\r\n        return value.docs\r\n            .map((doc) => Tweet.fromJson(doc.data(), doc.id))\r\n            .toList();\r\n      });\r\n      state = [...state, ...newTweets];\r\n    } catch (e) {\r\n      debugPrint(e.toString());\r\n    }\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Timeline"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"StateNotifier"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">> {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"DocumentSnapshot"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" lastDocument;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" user;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userProfile;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Timeline"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".lastDocument}) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"super"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([]) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"init"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"init"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    user "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseAuth"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance.currentUser"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    userProfile "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'users'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(user"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".uid)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"((value) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"fromJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(value."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    state "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"where"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'userId'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", whereIn"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userProfile"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".followings)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"orderBy"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'createdAt'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", descending"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"limit"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"((value) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      lastDocument "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" value.docs.last;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" value.docs"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"((doc) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"fromJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(doc."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(), doc.id))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"toList"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"loadMore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" newTweets "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"where"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'userId'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", whereIn"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userProfile"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".followings)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"orderBy"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'createdAt'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", descending"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"startAfterDocument"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(lastDocument"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"limit"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          ."}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"((value) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        lastDocument "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" value.docs[value.size "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"];"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" value.docs"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"((doc) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"fromJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(doc."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(), doc.id))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"toList"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      state "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [...state, ...newTweets];"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (e) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"debugPrint"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(e."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"However, instead of this, I use the paginate Firestore package to handle this. It paginates and fetches more tweets on scroll. Additionally, it displays the live feed. All we need to do is add it to the widget and give it the query."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For building each item that Firestore returned, it uses an item builder. First, we need to convert each item to a tweet object. Than we check the type of tweet and load the dedicated widget to display the tweet in the correct form."}]},{"type":"element","tag":"code","props":{"code":"PaginateFirestore(\r\n  itemBuilder: (context, documentSnapshots, index) {\r\n    final tweet = Tweet.fromJson(\r\n        documentSnapshots[index].data() as Map<String, dynamic>,\r\n        documentSnapshots[index].id);\r\n    if (tweet.type == TweetType.retweet) {\r\n      return TweetRetweetWidget(\r\n          tweet: tweet, originalTweet: tweet.originalTweet);\r\n    } else if (tweet.type == TweetType.reply) {\r\n      return TweetReplyWidget(\r\n          tweet: tweet, originalTweet: tweet.originalTweet);\r\n    } else {\r\n      return TweetWidget(tweet: tweet);\r\n    }\r\n  },\r\n  query: FirebaseFirestore.instance\r\n      .collection('tweets')\r\n      .where('userId', whereIn: (userFollowings.value as List<dynamic>))\r\n      .orderBy('createdAt', descending: true),\r\n  itemBuilderType: PaginateBuilderType.listView,\r\n  isLive: true,\r\n  itemsPerPage: 20,\r\n  onEmpty: const Center(\r\n    child: Text('No tweets'),\r\n  ),\r\n)\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"PaginateFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  itemBuilder"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (context, documentSnapshots, index) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweet "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"fromJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        documentSnapshots[index]."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Map"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        documentSnapshots[index].id);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (tweet.type "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TweetType"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".retweet) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TweetRetweetWidget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweet, originalTweet"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweet.originalTweet);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (tweet.type "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TweetType"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".reply) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TweetReplyWidget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweet, originalTweet"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweet.originalTweet);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TweetWidget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweet);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  query"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"where"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'userId'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", whereIn"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (userFollowings.value "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"List"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"dynamic"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"orderBy"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'createdAt'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", descending"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  itemBuilderType"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"PaginateBuilderType"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".listView,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  isLive"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  itemsPerPage"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  onEmpty"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Center"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    child"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Text"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'No tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"tweet-widget"},"children":[{"type":"text","value":"Tweet Widget"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To show the tweet, create a tweet widget in the widgets directory. This widget is also a stateless widget, because we will get the tweet from the timeline widget. I use a card as a wrapper but a column could be used instead. To show user's info, I created another widget to make code more readable. With this widget, we use a future provider to retrieve the user's information and display their name and username. We display a dummy icon as your profile icon."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Finally we display the tweet's body and actions. Again for readability, I created a separate widget for tweet actions."}]},{"type":"element","tag":"code","props":{"code":"// Tweet User widget\r\nWidget build(BuildContext context, WidgetRef ref) {\r\n  final whichProfileToShow = ref.watch(whichProfileToShowProvider.notifier);\r\n\r\n  return FutureBuilder(\r\n    future: user,\r\n    builder: ((context, snapshot) {\r\n      if (snapshot.hasData) {\r\n        return Row(\r\n          mainAxisAlignment: MainAxisAlignment.start,\r\n          children: [\r\n            TextButton(\r\n              onPressed: () {\r\n                whichProfileToShow.state = snapshot.data!.id!;\r\n                Navigator.pushNamed(context, '/profile');\r\n              },\r\n              child: Text(\r\n                snapshot.data!.name ?? 'Loading...',\r\n                style: const TextStyle(fontWeight: FontWeight.w600),\r\n              ),\r\n            ),\r\n            const SizedBox(width: 5),\r\n            Text(\r\n              snapshot.data != null\r\n                  ? '@${snapshot.data!.username}'\r\n                  : 'Loading...',\r\n              style: const TextStyle(color: Colors.grey),\r\n            ),\r\n            const SizedBox(width: 5),\r\n            Text(\r\n              timeago.format(tweetPostTime ?? DateTime.now()),\r\n              style: const TextStyle(color: Colors.grey),\r\n            ),\r\n          ],\r\n        );\r\n      } else {\r\n        return const Text('Loading...');\r\n      }\r\n    }),\r\n  );\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a9f854"},"children":[{"type":"text","value":"// Tweet User widget"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Widget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"BuildContext"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" context, "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"WidgetRef"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" ref) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" whichProfileToShow "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" ref."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"watch"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(whichProfileToShowProvider.notifier);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FutureBuilder"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    future"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" user,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    builder"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" ((context, snapshot) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (snapshot.hasData) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Row"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          mainAxisAlignment"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"MainAxisAlignment"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".start,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          children"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TextButton"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              onPressed"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                whichProfileToShow.state "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" snapshot.data"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".id"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Navigator"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"pushNamed"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(context, "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'/profile'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              child"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Text"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                snapshot.data"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".name "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'Loading...'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                style"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TextStyle"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(fontWeight"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FontWeight"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".w600),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"SizedBox"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(width"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Text"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              snapshot.data "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'@${"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"snapshot"}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"!."}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"}'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'Loading...'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              style"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TextStyle"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(color"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Colors"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".grey),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"SizedBox"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(width"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Text"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              timeago."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"format"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(tweetPostTime "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"DateTime"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"now"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"()),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              style"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TextStyle"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(color"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Colors"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".grey),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          ],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      } "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Text"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'Loading...'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the tweet actions we conditionally display actions icons. And use the methods of the given tweet as actions."}]},{"type":"element","tag":"code","props":{"code":"//Tweet actions widget\r\nWidget build(BuildContext context) {\r\nreturn Row(\r\n  mainAxisAlignment: MainAxisAlignment.spaceEvenly,\r\n  children: [\r\n    Row(\r\n      mainAxisSize: MainAxisSize.min,\r\n      children: [\r\n        IconButton(\r\n          color: tweet?.replies\r\n                      ?.contains(FirebaseAuth.instance.currentUser?.uid) ??\r\n                  false\r\n              ? Colors.blue\r\n              : Colors.grey,\r\n          icon: const Icon(Icons.comment),\r\n          onPressed: () {\r\n            showDialog(\r\n              context: context,\r\n              builder: (context) {\r\n                return TweetNewReplyWidget(replyingTweet: tweet!);\r\n              },\r\n            );\r\n          },\r\n          splashRadius: 20,\r\n          tooltip: 'Reply',\r\n        ),\r\n        Text(tweet?.replies?.length.toString() ?? '0'),\r\n      ],\r\n    ),\r\n...\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a9f854"},"children":[{"type":"text","value":"//Tweet actions widget"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Widget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"BuildContext"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" context) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Row"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  mainAxisAlignment"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"MainAxisAlignment"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".spaceEvenly,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  children"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Row"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      mainAxisSize"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"MainAxisSize"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".min,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      children"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"IconButton"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          color"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".replies"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"contains"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseAuth"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance.currentUser"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".uid) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"false"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Colors"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".blue"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Colors"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".grey,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          icon"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Icon"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Icons"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".comment),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          onPressed"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"showDialog"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              context"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" context,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              builder"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (context) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TweetNewReplyWidget"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(replyingTweet"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"              },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"            );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          splashRadius"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"20"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"          tooltip"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'Reply'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Text"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".replies"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".length."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'0'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      ],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    ),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"..."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the reply and retweet all we need to do is use this tweet widget to display the original tweet. In retweet we don't have a body so we don't show any text; but in reply we need to show the reply body on top of the original tweet. To prevent some unclear behaviors, I do not include tweet actions in retweets and replies."}]},{"type":"element","tag":"h4","props":{"id":"new-tweet"},"children":[{"type":"text","value":"New Tweet"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The final thing left to do is to compose a new tweet. For this, we also add a separate screen and widget in dedicated folders. I won't use the local state when I create a new tweet because I want to share the tweet information between the screen and widget. In this way there could be a button on the screen to post the tweet. We will need to create a new tweet provider for this purpose. This provider is also a state notifier provider, that provides the new tweet class we are about to implement."}]},{"type":"element","tag":"code","props":{"code":"final newTweetProvider = StateNotifierProvider.autoDispose<NewTweet, Tweet>(\r\n  (ref) => NewTweet(),\r\n);\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" newTweetProvider "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"StateNotifierProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"autoDispose"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"NewTweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":">("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  (ref) "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"NewTweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The new tweet class constructs an empty tweet. It has a function to update the body, set the original tweet and set the type of the tweet. The last method that we need to implement is the post method that saves the tweet object to Firestore. By using the post method, we can handle the behavior I mentioned previously."}]},{"type":"element","tag":"code","props":{"code":"class NewTweet extends StateNotifier<Tweet> {\r\n  NewTweet() : super(Tweet());\r\n\r\n  void updateText(String text) {\r\n    state.body = text;\r\n  }\r\n\r\n  void setOriginalTweet(Tweet tweet) {\r\n    final tweetDoc =\r\n        FirebaseFirestore.instance.collection('tweets').doc(tweet.id);\r\n    state.originalTweet = tweetDoc;\r\n  }\r\n\r\n  void setTweetType(TweetType type) {\r\n    state.type = type;\r\n  }\r\n\r\n  Future<void> post() async {\r\n    final user = FirebaseAuth.instance.currentUser;\r\n    if (user == null) {\r\n      throw Exception('User is not signed in');\r\n    }\r\n    final userDoc = await FirebaseFirestore.instance\r\n        .collection('users')\r\n        .doc(user.uid)\r\n        .get();\r\n    final userData = userDoc.data();\r\n    if (userData == null) {\r\n      throw Exception('User data is not found');\r\n    }\r\n    final userObj = my_user.User.fromJson(userData);\r\n    final tweet = Tweet(\r\n      body: state.body,\r\n      createdAt: DateTime.now(),\r\n      likes: [],\r\n      media: [],\r\n      originalTweet: state.originalTweet,\r\n      replies: [],\r\n      retweets: [],\r\n      type: state.type ?? TweetType.tweet,\r\n      user: Future.value(userObj),\r\n      userId: user.uid,\r\n      hashtags: state.hashtags,\r\n      mentions: state.mentions,\r\n    );\r\n    final newTweetDoc = await FirebaseFirestore.instance\r\n        .collection('tweets')\r\n        .add(tweet.toJson());\r\n    newTweetDoc.update({'id': newTweetDoc.id});\r\n    await FirebaseFirestore.instance.collection('users').doc(user.uid).update({\r\n      'tweets': FieldValue.arrayUnion([newTweetDoc.id]),\r\n    });\r\n  }\r\n}\n","language":"dart"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"NewTweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"extends"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"StateNotifier"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"NewTweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"super"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"updateText"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" text) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    state.body "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" text;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"setOriginalTweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweet) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweetDoc "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(tweet.id);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    state.originalTweet "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweetDoc;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"setTweetType"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TweetType"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" type) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    state.type "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" type;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" user "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseAuth"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance.currentUser;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (user "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Exception"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'User is not signed in'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userDoc "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'users'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(user.uid)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userData "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userDoc."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" (userData "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Exception"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'User data is not found'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" userObj "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" my_user."}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"User"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"fromJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userData);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" tweet "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Tweet"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      body"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state.body,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      createdAt"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"DateTime"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"now"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      likes"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      media"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      originalTweet"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state.originalTweet,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      replies"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      retweets"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" [],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      type"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state.type "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"??"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"TweetType"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".tweet,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      user"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"Future"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(userObj),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      userId"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" user.uid,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      hashtags"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state.hashtags,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      mentions"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" state.mentions,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    );"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"final"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" newTweetDoc "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(tweet."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"toJson"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"());"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    newTweetDoc."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'id'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" newTweetDoc.id});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FirebaseFirestore"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":".instance."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"collection"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'users'"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"(user.uid)."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-468a6c"},"children":[{"type":"text","value":"'tweets'"}]},{"type":"element","tag":"span","props":{"class":"ct-61846d"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-91df88"},"children":[{"type":"text","value":"FieldValue"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f45186"},"children":[{"type":"text","value":"arrayUnion"}]},{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"([newTweetDoc.id]),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cc981c"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the widget we need to validate if the tweet body is empty. If this or any other error occurs, we show the snackbar to notify the user."}]},{"type":"element","tag":"h3","props":{"id":"profile"},"children":[{"type":"text","value":"Profile"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Before talking about the profile page, I think that I show enough code to describe the general shape and structure. Therefore, I will not post any code here anymore, but you can find the repository of the project at the end of the post. If you want you can check out dedicated files."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mentioning that, let's talk about the profile page. For the profile page, I created the screen in the routes file and created three widgets to show tweets, retweets and replies of the user separately. I use the page view widget to display these widgets. With the page view widget we also gain to swipe left and right to change the page. Also, I added a bottom navigation bar to show the user which page they are on."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the sub-widgets to display user's tweets, I use the paginate firestore package again. I get the user info from the provider, which determines which user to show on the profile page. Then query the user tweets and show them using the tweet widget, like we did in timeline."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"At the top of the page, I created a profile header widget to display the information of the user that we hold in Firestore. Also I display tweet count as well as following and follower counts."}]},{"type":"element","tag":"h3","props":{"id":"explore"},"children":[{"type":"text","value":"Explore"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To begin with, I want to say that the explore page frustrates me. Because we can't define cloud functions for free in Firebase. To avoid this, I created a dummy trending topics collection in Firestore."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Before implementing this page, I added hashtags and mentions to the tweet model. They contain the mentions and hashtags the user enters. To detect mentions and hashtags, I used another package called detectable text field. This package provides us with brand-new text and text field widgets. The text widget displays the detected entities in different colors and makes them clickable. When the user clicks a hashtag we will navigate to the dedicated hashtag page. And when the user clicks on the mention we'll show the profile of that user. The text field is also capable of detecting entities. It reformats the detected entity in different colors and gives us a list of entities that are detected. This way, we can add mentions and hashtags to the tweet's dedicated fields."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I created a screen and a widget for the explore page. In the widget, I used a future builder to get trending topics from Firestore. The same as in the profile, I created a provider to store the hashtag information that a user presses for display. For displaying hashtags, I built a separate screen and widget. In this widget I used the paginate Firestore extension to display tweets whose hashtag field contains the hashtag."}]},{"type":"element","tag":"h3","props":{"id":"messages"},"children":[{"type":"text","value":"Messages"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Last but not least, we are here to create instant messaging. The messaging widget could be considered a separate app, but I added it to increase my practice. First of all, we need to create models for messages and chats."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Firestore message collection will contain the message id, creation time, sender's and receiver's IDs, and a list of the respective IDs for further checks. We populate the message class with these fields and also implement the from and to JSON methods. Besides these methods, I also implemented methods that return the user of the sender and receiver. Moreover, I created a method to create a new message, create a new chat message, a method to check if chat exists."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In each message, we store chat messages as a collection, not as a field. With this approach, our querying capabilities increase and we could use the paginate firestore extension. An individual chat message consists of a body, a creation time, a from, and an is read field. For this collection, we also implement a chat message model and methods needed."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When we look at the messages widget, we query the messages collection and get all the messages that current users ID in the IDs field of messages. As we did in profile and hashtags we created a provider to hold the information about which message to show while navigating to the chat screen."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the chat screen, I created a widget to display individual message body. This widget displays the message near or far end of the screen with different colors depending on whether it is from the current user or not. For fetching messages we again use the paginate firestore package. This time we use the reversing future. When the user scrolls up, the old messages will load."}]},{"type":"element","tag":"h3","props":{"id":"search"},"children":[{"type":"text","value":"Search"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As for the final, we implemented the search screen. For search, I used a package called firestore search that handles querying. As we couldn't implement full text search, I decided to search only for users with usernames."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the package to work we need to add a method to the user model. This method will get a query snapshow from firestore and convert it to a user object."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Thanks to the listview builder, this object is used to dynamically display users in a list. When the tile is clicked, the user profile page will be displayed."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As a conclusion, I want to show some screenshots of the app. It's not pretty, but it works... Having said that, the only thing I didn't implement was the notification. As we progressed through this, it became quite obvious how to do this. We can create a notification collection for each user in the Firestore and display from there."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Sign in","src":"/blogImg/page4/ss1.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sign in"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Sign up","src":"/blogImg/page4/ss2.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sign up"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Timeline","src":"/blogImg/page4/ss3.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Timeline"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Drawer","src":"/blogImg/page4/ss4.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Drawer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Search","src":"/blogImg/page4/ss5.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Search"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Profile","src":"/blogImg/page4/ss6.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Profile"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Explore","src":"/blogImg/page4/ss7.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Explore"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Messages","src":"/blogImg/page4/ss8.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Messages"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Conversation","src":"/blogImg/page4/ss9.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Conversation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This journey was enjoyable for me. As a reader, I hope you enjoyed the story..."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here is the link to the "},{"type":"element","tag":"a","props":{"href":"https://github.com/umitkara/twitter_clone_flutter","rel":["nofollow"]},"children":[{"type":"text","value":"Github Repo"}]},{"type":"text","value":" if you want to check... Have a nice day."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-a9f854{color:#6E7781}.ct-f45186{color:#8250DF}.ct-468a6c{color:#0A3069}.ct-91df88{color:#0550AE}.ct-cc981c{color:#24292F}.ct-61846d{color:#CF222E}.dark .ct-61846d{color:#FF7B72}.dark .ct-cc981c{color:#C9D1D9}.dark .ct-91df88{color:#79C0FF}.dark .ct-468a6c{color:#A5D6FF}.dark .ct-f45186{color:#D2A8FF}.dark .ct-a9f854{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"last-step-play-the-game","depth":2,"text":"Last Step: Play the Game","children":[{"id":"directory-structure","depth":3,"text":"Directory Structure"},{"id":"routing","depth":3,"text":"Routing"},{"id":"firebase","depth":3,"text":"Firebase"},{"id":"riverpod-state-management","depth":3,"text":"Riverpod: State Management"},{"id":"authentication","depth":3,"text":"Authentication"},{"id":"timeline","depth":3,"text":"Timeline"},{"id":"profile","depth":3,"text":"Profile"},{"id":"explore","depth":3,"text":"Explore"},{"id":"messages","depth":3,"text":"Messages"},{"id":"search","depth":3,"text":"Search"}]}]}},"_type":"markdown","_id":"content:page4.md","_source":"content","_file":"page4.md","_extension":"md"}